<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Invoca Markdown API</title>
        <meta name="robots" content="noindex" />


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="index.html"><strong aria-hidden="true">1.</strong> Intro</a></li><li class="chapter-item expanded "><a href="basics/index.html"><strong aria-hidden="true">2.</strong> The Basics</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="basics/design_principles.html"><strong aria-hidden="true">2.1.</strong> Design Principles</a></li><li class="chapter-item expanded "><a href="basics/error_handling.html"><strong aria-hidden="true">2.2.</strong> Error Handling</a></li><li class="chapter-item expanded "><a href="basics/ppc_platform_authentication_access_tokens.html"><strong aria-hidden="true">2.3.</strong> PPC Platform Authentication</a></li><li class="chapter-item expanded "><a href="basics/saml_single_sign_on.html"><strong aria-hidden="true">2.4.</strong> Single Sign On</a></li></ol></li><li class="chapter-item expanded "><a href="api_documentation/index.html"><strong aria-hidden="true">3.</strong> API Documentation</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="api_documentation/transactions_api/index.html"><strong aria-hidden="true">3.1.</strong> Transactions API</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="api_documentation/transactions_api/network_user.html"><strong aria-hidden="true">3.1.1.</strong> Network / Brand</a></li><li class="chapter-item expanded "><a href="api_documentation/transactions_api/advertiser_user.html"><strong aria-hidden="true">3.1.2.</strong> Advertiser / Merchant</a></li><li class="chapter-item expanded "><a href="api_documentation/transactions_api/affiliate_user.html"><strong aria-hidden="true">3.1.3.</strong> Publisher / Affiliate</a></li></ol></li><li class="chapter-item expanded "><a href="api_documentation/network_integration/index.html"><strong aria-hidden="true">3.2.</strong> Network Integrations API</a></li><li class="chapter-item expanded "><a href="api_documentation/bulk_ringpool_api.html"><strong aria-hidden="true">3.3.</strong> Bulk Ringpool API</a></li><li class="chapter-item expanded "><a href="api_documentation/signal_api/index.html"><strong aria-hidden="true">3.4.</strong> Signal API</a></li><li class="chapter-item expanded "><a href="api_documentation/manage_api_credentials.html"><strong aria-hidden="true">3.5.</strong> Manage API Credentials</a></li></ol></li><li class="chapter-item expanded "><a href="web_integration.html"><strong aria-hidden="true">4.</strong> Web Integration</a></li><li class="chapter-item expanded "><a href="api_documentation/index.html"><strong aria-hidden="true">5.</strong> Depricated APIs</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="api_documentation/conversion_reporting.html"><strong aria-hidden="true">5.1.</strong> Conversion Reporting API</a></li><li class="chapter-item expanded "><a href="api_documentation/ringpool_api.html"><strong aria-hidden="true">5.2.</strong> Ringpool API</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Invoca Markdown API</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="welcome-to-the-invoca-developer-portal"><a class="header" href="#welcome-to-the-invoca-developer-portal">Welcome to the Invoca Developer Portal</a></h1>
<h3 id="leverage-the-power-of-invoca-in-your-app-or-website-browse-the-portal-sections-for-all-your-documentation-needs"><a class="header" href="#leverage-the-power-of-invoca-in-your-app-or-website-browse-the-portal-sections-for-all-your-documentation-needs">Leverage the power of Invoca in your app or website. Browse the portal sections for all your documentation needs.</a></h3>
<h2 id="this-is-a-passion-day-project"><a class="header" href="#this-is-a-passion-day-project">This is A Passion Day Project</a></h2>
<p>This is an Passion Day project to see if our current API documentation
system (via ReadTheDocs and the reStructuredText format) could be
replaced with GitHub pages and traditional Markdown using the <a href="https://rust-lang.github.io/mdBook/format/markdown.html">mdBook System</a>.</p>
<p>The goal is to make it <em>much</em> easier for all is to update our API documents so they get better and better over time. </p>
<h2 id="this-book-is-divided-into-three-parts"><a class="header" href="#this-book-is-divided-into-three-parts">This book is divided into three parts:</a></h2>
<h1 id="the-basics"><a class="header" href="#the-basics"><a href="./basics/index.html">The Basics</a></a></h1>
<p>This section covers the several differnet fundamental areas of interacting with our APIs and web integration code.</p>
<h1 id="api-documentation"><a class="header" href="#api-documentation"><a href="./api_documentation/index.html">API Documentation</a></a></h1>
<p>Get documentation for each of the APIs in Invoca's full suite and learn how to access oAuth compliant tokens.</p>
<h1 id="web-integration"><a class="header" href="#web-integration"><a href="./web_integration.html">Web Integration</a></a></h1>
<p>Invoca's web integration code will dynamically display a unique phone number for each source driving traffic to landing pages.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="the-basics-1"><a class="header" href="#the-basics-1">The Basics</a></h1>
<p>These sections cover basic design principles, error handling, our PPC platform and signal sign on.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="design-principles"><a class="header" href="#design-principles">Design Principles</a></h1>
<h2 id="rest"><a class="header" href="#rest">REST</a></h2>
<p>All interfaces use <a href="http://en.wikipedia.org/wiki/REST">REST</a>. This makes
them easy to predict as they use HTTP and its existing verbs to Create,
Read, Update, and Delete objects. Any language that supports HTTP can
access these interfaces. Create and Update are idempotent operations.</p>
<table>
<colgroup>
<col style="width: 20%" />
<col style="width: 7%" />
<col style="width: 72%" />
</colgroup>
<thead>
<tr class="header">
<th>Action</th>
<th>HTTP Verb</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Create</td>
<td>POST</td>
<td>Object is created. If it already exists, it is updated.</td>
</tr>
<tr class="even">
<td>Read</td>
<td>GET</td>
<td>Object is read.</td>
</tr>
<tr class="odd">
<td>Update</td>
<td>PUT</td>
<td>Object is created. If it already exists, it is updated.</td>
</tr>
<tr class="even">
<td>Delete</td>
<td>DELETE</td>
<td>Object is deleted. If the object has already been deleted, does nothing.</td>
</tr>
</tbody>
</table>
<h2 id="status-codes"><a class="header" href="#status-codes">Status Codes</a></h2>
<p>HTTP Status codes are used to indicate success or failure. The set of
status codes returned by the Network Integration API are:</p>
<table>
<colgroup>
<col style="width: 21%" />
<col style="width: 78%" />
</colgroup>
<thead>
<tr class="header">
<th>Status Code</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>200, 201</td>
<td>Success</td>
</tr>
<tr class="even">
<td>401</td>
<td>Failure. Access is not authorized.</td>
</tr>
<tr class="odd">
<td>403</td>
<td>Failure. Request arguments are invalid.</td>
</tr>
<tr class="even">
<td>404</td>
<td>Failure. The resource was not found.</td>
</tr>
<tr class="odd">
<td>500</td>
<td>Failure. Internal Service Error.</td>
</tr>
</tbody>
</table>
<p>* See the section on Error Handling for greater detail on response
bodies for failure codes.</p>
<h2 id="security"><a class="header" href="#security">Security</a></h2>
<p>HTTPS is required for all API requests.</p>
<p>Authentication is performed using one of several approaches.</p>
<p>The preferred approach is to use Invoca API tokens, which are created
and managed on the Manage API Credentials page of the platform.</p>
<p>Some API endpoints will accept HTTP(S) Basic Authentication, which
authenticates using a username and password in the request header.</p>
<p>Additionally, session login authentication is sufficient as an
alternative. This is so that you can test an API URL simply by logging
in to the platform first as a Network Role of ‘Super’ (full access user)
and then pasting the URL into the browser.</p>
<h2 id="using-oauth-token-to-access-invoca-apis"><a class="header" href="#using-oauth-token-to-access-invoca-apis">Using OAuth token to Access Invoca APIs</a></h2>
<p>Requests are authenticated using HTTPS basic authentication with an
Invoca API Token, which can be created and managed on the Manage API
Credentials page in the platform.</p>
<h2 id="step-by-step-guide-using-api-token-to-access-apis"><a class="header" href="#step-by-step-guide-using-api-token-to-access-apis">Step by step guide using API token to access APIs</a></h2>
<ol>
<li>
<p>Obtain OAuth 2.0 credentials from the Manage API Credentials.</p>
<p>Visit your API Credentials page to obtain OAuth 2.0 credentials for
your Network Integration API.</p>
</li>
<li>
<p>Send the access token to an API.</p>
</li>
</ol>
<p>After you obtain a token, include it in the HTTP header of your request,
as a URL string parameter, or as a key/value pair in the JSON body.</p>
<p>Example using API token as URL parameter:</p>
<p><code>https://&lt;vanity&gt;.invoca.net/api/@@NETWORK_API_VERSION/advertisers.json?oauth_token=YbcFHZ38FNfptfZMB0RZ6dk9dOJCaCfU</code></p>
<p>Example using Curl to make an API call with token-based authentication:</p>
<pre><code>curl -X POST -H &quot;Accept: application/json&quot; -H &quot;Content-Type: application/json&quot; 'https://\&lt;vanity\&gt;.invoca.net/api/@@NETWORK_API_VERSION/advertisers/1111.json' -d '{&quot;oauth_token&quot;:&quot;YbcFHZ38FNfptfZMB0RZ6dk9dOJCaCfU&quot;}'
</code></pre>
<p><strong>Guidelines</strong> * Users should generate their own API tokens. Tokens
should be treated like passwords and not be emailed or transmitted over
other insecure mediums, nor should they be stored in a source code
repository. * As a network user, you should not generate a token on
behalf of Advertisers or Publishers because tokens inherit the
privileges of the user generating it. * Invoca does not use OAuth
refresh tokens.</p>
<h2 id="idempotency"><a class="header" href="#idempotency">Idempotency</a></h2>
<p>Most interfaces are designed to be idempotent, meaning that it is
harmless to call them more than once with the same parameters.
Subsequent calls to an interface have no side effects, and return the
same result.</p>
<h2 id="selfcorrection"><a class="header" href="#selfcorrection">Self‐Correction</a></h2>
<p>Most updates expect a complete copy of the object, making Update and
Create interchangeable. This means that errors tend to be corrected over
time. Campaign Terms are an exception to this due to their complexity
(see Advertiser Campaigns for more).</p>
<h2 id="versioning"><a class="header" href="#versioning">Versioning</a></h2>
<p>The API version is given as a date in the path.</p>
<h2 id="dedicated-subdomain"><a class="header" href="#dedicated-subdomain">Dedicated Subdomain</a></h2>
<p>All APIs are accessed through the dedicated subdomain of invoca.net that
is used for the network. For example, a network named &quot;LeadTrust&quot; might
be assigned leadtrust.invoca.net. We recommend that, when making your
API calls, you place your &lt;network_id&gt; after the API version in
the url.</p>
<h2 id="request-parameter-format--response-body-format"><a class="header" href="#request-parameter-format--response-body-format">Request Parameter Format &amp; Response Body Format</a></h2>
<p>Previous versions of the API accepted form‐encoded style parameters in
the request and used XML as the output format. As of
@@NETWORK_API_VERSION, all new feature development has switched to
JSON format for both request and response. Previous XML functionality
will continue to be supported via the 2013‐03‐22 version of the API
(please contact <a href="mailto:basics/questions@invoca.com">questions@invoca.com</a> for more information on previous
versions).</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="error-handling"><a class="header" href="#error-handling">Error Handling</a></h1>
<h2 id="common-ringpool-errors"><a class="header" href="#common-ringpool-errors">Common RingPool errors:</a></h2>
<p>Not found – 404:</p>
<p><code>https://invoca.net/api/2014­-01-­01/&lt;network_id&gt;/advertisers/1/advertiser_campaigns/100/ring_pools/123.json</code></p>
<pre><code>{
  &quot;errors&quot;: {
    &quot;invalid_data&quot;: &quot;Could not find RingPool 123 for advertiser campaign 100 and advertiser 1&quot;,
    &quot;class&quot;: &quot;RecordNotFound&quot;
  }
}
</code></pre>
<p>Validation failed – 403 – Body contains a json with validation errors
for each field:</p>
<pre><code>{
  &quot;errors&quot;: {
    &quot;pool_type&quot;: [
      &quot;can't be blank&quot;
    ],
    &quot;destination_type&quot;: [
      &quot;can't be blank&quot;
    ],
    &quot;name&quot;: [
      &quot;can't be blank&quot;
    ]
  }
}
</code></pre>
<p>Service error – 500 – Body contains a json Error with a unique handle
(to use as a cross‐reference with Invoca):</p>
<pre><code>{
  &quot;errors&quot;: {
    &quot;invalid_data&quot;: &quot;refer to error handle 1228118400&quot;,
    &quot;class&quot;: &quot;InternalServiceError&quot;
  }
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ppc-platform-authentication-access-tokens"><a class="header" href="#ppc-platform-authentication-access-tokens">PPC Platform Authentication Access Tokens</a></h1>
<p>The PPC Platform provides an interface to get a one‐time use access
token authenticating a Network, Advertiser, or Affiliate user. The
access token must then be appended to a PPC Platform destination URL.</p>
<p>The network authenticates an organization by doing the following:</p>
<ol>
<li>Authenticates the user on the network Platform.</li>
<li>Makes a server‐to‐server request for a one‐time use access token.</li>
<li>Appends the returned access token to the PPC Platform destination
URL <span
class="title-ref">access_token=&lt;ProvidedAccessToken&gt;</span></li>
<li>Redirects to the PPC Platform destination URL.</li>
</ol>
<p>The format of the API URL is in (2):</p>
<pre><code>https://invoca.net/api/2014-­01-­01/&lt;network_id&gt;/network/&lt;email&gt;/create_access_token.json
</code></pre>
<pre><code>https://invoca.net/api/2014­-01-­01/&lt;network_id&gt;/advertisers/&lt;advertiser_id_from_network&gt;/&lt;email&gt;/create_access_token.json
</code></pre>
<pre><code>https://invoca.net/api/2014­-01-­01/&lt;network_id&gt;/affiliates/&lt;affiliate_id_from_network&gt;/&lt;email&gt;/create_access_token.json
</code></pre>
<p>The success response is an JSON document with a root element of Response
that contains a single AccessToken element whose content is the access
token:</p>
<table>
<colgroup>
<col style="width: 60%" />
<col style="width: 40%" />
</colgroup>
<thead>
<tr class="header">
<th>Response JSON Element</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>AccessToken</td>
<td>The access token</td>
</tr>
</tbody>
</table>
<p>Example URLs</p>
<p>Create access token for “<a href="mailto:basics/sy@young.com">sy@young.com</a>” network user:</p>
<p>POST</p>
<pre><code>https://invoca.net/api/2014­-01-­01/&lt;network_id&gt;/network/sy%40young.com/create_access_token.json HTTP/1.1
</code></pre>
<p>Response:</p>
<pre><code>{
  &quot;token&quot;: &quot;bpD8HmLcCxzSiOX01v­4XbZr4_s&quot;,
  &quot;id&quot;: 1
}
</code></pre>
<p>Create access token for “<a href="mailto:basics/sy@young.com">sy@young.com</a>” user in advertiser id 354:</p>
<p>POST</p>
<pre><code>https://invoca.net/api/2014­-01-­01/&lt;network_id&gt;/advertisers/354/sy%40young.com/create_access_token.json HTTP/1.1
</code></pre>
<p>Response:</p>
<pre><code>{
  &quot;token&quot;: &quot;bpD8HmLcCxzSiOX01v­4XbZr4_s&quot;,
  &quot;id&quot;: 1
}
</code></pre>
<p>Create access token for &quot;<a href="mailto:basics/sy@young.com">sy@young.com</a>&quot; user in affiliate id 976:</p>
<p>POST</p>
<pre><code>https://invoca.net/api/2014­-01-­01/&lt;network_id&gt;/affiliates/976/sy%40young.com/create_access_token.json HTTP/1.1
</code></pre>
<p>Response:</p>
<pre><code>{
  &quot;token&quot;: &quot;bpD8HmLcCxzSiOX01v­4XbZr4_s&quot;,
  &quot;id&quot;: 1
}
</code></pre>
<h2 id="on-the-fly-authentication"><a class="header" href="#on-the-fly-authentication">On-The-Fly Authentication</a></h2>
<p>The PPC Platform supports &quot;On-The-Fly Authentication&quot;: if a user types
in a URL, or clicks on a link in an email, or chooses a bookmarked link
and they are not currently logged in (&quot;authenticated&quot;), they must first
log in and then are redirected to their original destination URL.</p>
<p>When using the API, all authentication is by the network on behalf of
the replicated users. So in this case the PPC Platform redirects to a
network authentication URL such as <a href="http://www.network.com/loginwith">http://www.network.com/loginwith</a>
with the following query parameters:</p>
<table>
<colgroup>
<col style="width: 20%" />
<col style="width: 80%" />
</colgroup>
<thead>
<tr class="header">
<th>Query Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>destination</td>
<td>The ultimate PPC Platform destination URL to redirect to once authentication has been established.</td>
</tr>
<tr class="even">
<td>type</td>
<td>Either advertiseror affiliate, or empty if unknown.</td>
</tr>
</tbody>
</table>
<p>For example:</p>
<pre><code>http://www.network.com/login?destination=http%3A%2F%2Finvoca.net%2Faffiliates%2F1&amp;type=advertiser
</code></pre>
<p>The network authenticates the user either by using existing session
credentials or by prompting for login credentials. It generates an
access token using a server‐to‐server POST:</p>
<p>POST</p>
<pre><code>https://invoca.net/api/2014­-01-­01/&lt;network_id&gt;/advertisers/354/sy%40young.com/create_access_token.json
</code></pre>
<p>The returned value is an access token, for example 9AC23B903F4. The
network then appends this token to the destination URL and redirects
there:</p>
<pre><code>http://invoca.net/affiliates/1?access_token=9AC23B903F4
</code></pre>
<h2 id="network-link-to-ppc"><a class="header" href="#network-link-to-ppc">Network Link to PPC</a></h2>
<p>The network platform offers a Marketing Automation hyperlink in the
authenticated area for Advertisers and Affiliates. The link uses the
same landing page as On-The-Fly authentication does to seamlessly log
the user into the Invoca Marketing Automation Platform:</p>
<pre><code>http://www.network.com/login?destination=http%3A%2F%2F&lt;network&gt;.invoca.net%2Fhome
</code></pre>
<h2 id="ppc-link-to-network"><a class="header" href="#ppc-link-to-network">PPC Link to Network</a></h2>
<p>The PPC platform offers a “Return from marketing automation” link that
returns to an appropriate URL at the network. This URL must be provided
by the network. For example:</p>
<p><a href="http://www.network.com/home">http://www.network.com/home</a></p>
<h2 id="curl-examples"><a class="header" href="#curl-examples">CURL examples:</a></h2>
<p>Here are some basic examples on how to use the API using CURL.</p>
<p>Create</p>
<p><span class="title-ref">curl -v ­XPOST -H &quot;Content­Type:
application/json&quot; -u '&lt;username&gt;:&lt;password&gt;’
'https://www.invoca.net/api/2014­-01-­01/&lt;network_id&gt;/&lt;url&gt;'
-d '&lt;valid JSON&gt;’</span></p>
<p>Read</p>
<p><span class="title-ref">curl -v -u '&lt;username&gt;:&lt;password&gt;
'https://www.invoca.net/api/2014­-01­-01/&lt;network_id&gt;/&lt;url&gt;'</span></p>
<p>Update</p>
<p><span class="title-ref">curl­ -v -XPUT -H &quot;Content­Type:
application/json&quot; -u '&lt;username&gt;:&lt;password&gt;
'https://www.invoca.net/api/2014­-01-­01/&lt;network_id&gt;/&lt;url&gt;'
-d '&lt;valid JSON&gt;’</span></p>
<p>Delete</p>
<p><span class="title-ref">curl -v -XDELETE -H &quot;Content­Type:
application/json&quot; -u '&lt;username&gt;:&lt;password&gt;
'https://www.invoca.net/api/2014­-01­-01/&lt;network_id&gt;/&lt;url&gt;'
-d '&lt;valid JSON&gt;’</span></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="saml-single-sign-on"><a class="header" href="#saml-single-sign-on">SAML Single Sign-On</a></h1>
<div id="central-column" class="container-fluid"><p>
  Invoca allows for single sign-on to be orchestrated by an identity provider by utilizing
  the SAML protocol.  Documentation for configuring your SAML single sign-on integration
  can be found <a href="https://community.invoca.com/t5/platform-administration/saml-single-sign-on-appendix/ta-p/627">here</a>.
</p></div>
<div style="break-before: page; page-break-before: always;"></div><h1 id="api-documentation-1"><a class="header" href="#api-documentation-1">API Documentation</a></h1>
<p>The platform provides a number of APIs:</p>
<p><a href="api_documentation/./transactions_api/index.html">Transactions API</a> - provides read-only access to call transaction data. There are three kinds of users:</p>
<ul>
<li>
<p><a href="api_documentation/./transactions_api/network_user.html">Network User</a></p>
</li>
<li>
<p><a href="api_documentation/./transactions_api/adveriser_user.html">Advertiser User</a></p>
</li>
<li>
<p><a href="api_documentation/./transactions_api/affiliate_user.html">Affiliate User</a></p>
</li>
</ul>
<p><a href="api_documentation/./network_integration/index.html">Network Integration API</a> - supports
the replication and synchronization of advertiser, publisher and
campaign data between partner platforms.</p>
<p><a href="api_documentation/./conversion_reporting/index.html">Converstion Reporting</a> -provides the
ability to report completed order information (or other conversion
events) from a server back into the platform.</p>
<p><a href="api_documentation/./bulk_ringpool_api.html">Bulk Ringpool API</a> -allocates a dynamic,
trackable promo phone number from a RingPool (designed to handle a
high volume of requests per second).</p>
<h1>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
<a href="api_documentation/./signal_api/index.html">Signal API</a> -used to report signals that occur
on a specific call. Rainbows!  (transaction).</h1>
<p><a href="api_documentation/./signal_api/index.html">Signal API</a> -used to report signals that occur on a specific call.
(transaction).
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 1166bffb1ede806c9e030fc6de9a92ef3ee68d52</p>
<p><code>call_api/index</code> -used to pull transcript information for a specific
call (transcript).</p>
<p><code>call_ingestion_api/index</code> -used to ingest calls from external sources
for conversation intelligence processing and inclusion in your reports
and dashboards.</p>
<p><code>calls_in_progress_api/index</code> -used to query/update calls that are
currently in progress within the Invoca platform</p>
<p>The Transactions API and Network Integration API are accessible using
the API credentials generated on the platform. See
<code>manage_api_credentials</code> for more information.</p>
<p>The Conversion Reporting API is accessible using credentials provided by
Invoca. Contact <a href="mailto:api_documentation/questions@invoca.com">questions@invoca.com</a> to request Conversion Reporting
API credentials.</p>
<p>The RingPool and Bulk RingPool APIs are accessible using the API keys
provided in the RingPool wizard. (Note: the Bulk RingPool API is only
available after being enabled by Customer Success. Contact
<a href="mailto:api_documentation/questions@invoca.com">questions@invoca.com</a> to request the Bulk RingPool API.)</p>
<p>The RingPool wizard includes a section showing the correct API URL for
your organization:</p>
<img src="https://lh6.googleusercontent.com/bPAQy29TdQ_Pljxyv5gh520cLnWHWNWUXyU8_GrN52yLNOdkKlWZPzFLCOKgdE-IejM3XDdJGZyJtQ8EMprqwUSImYfuffWuXMGQAYAFzEbMOxt7Ggtp59Q96AOf6a3BeQ"  class="info-img" width="544px;" height="191px;" style="border-style: none;" alt="RP_API.png" />
<p>manage_api_credentials network_integration/index
transactions_api/index bulk_ringpool_api ringpool signal_api/index
call_api/index call_ingestion_api/index
calls_in_progress_api/index conversion_reporting</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="transactions-api"><a class="header" href="#transactions-api">Transactions API</a></h1>
<p>The Transactions API returns call attributes, marketing data, and signal conversions. Additionally, correction transactions are returned that serve as corrections to previous call transactions. The API follows REST conventions. Perform an HTTPS GET to the URL with the format in which you’d like to receive data. The following response formats are supported.</p>
<ul>
<li>CSV</li>
<li>XML</li>
<li>JSON</li>
</ul>
<p>The API is accessible using the API credentials generated
on the platform. </p>
<p><a href="https://community.invoca.com/t5/developer-features/how-to-access-invoca-call-data-programmatically-via-api/ta-p/602">View the support documentation for this API.</a></p>
<p>The data returned depends on your account type. To see which fields you
will see, select an account type below.</p>
<p><code>network_user</code> <a href="api_documentation/transactions_api/./transactions_api/network_user.html">Network / Brand</a></p>
<p><code>advertiser_user</code> <a href="api_documentation/transactions_api/./transactions_api/advertiser_user.html">Advertiser / Merchant</a></p>
<p><code>affiliate_user</code> <a href="api_documentation/transactions_api/./transactions_api/affiliate_user.html">Publisher / Affiliate</a></p>
<p>Please note, the documentation shows a superset of fields available.
Your response may differ depending on the features enabled on the
platform being accessed. Make a sample request to the API to identify
the fields returned.</p>
<h1 id="response"><a class="header" href="#response">Response</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="network--brand"><a class="header" href="#network--brand">Network / Brand</a></h1>
<table>
<colgroup>
<col style="width: 16%" />
<col style="width: 83%" />
</colgroup>
<thead>
<tr class="header">
<th>Format</th>
<th>Description and URL</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>csv</td>
<td>Comma-Separated Values, or really Anything-Separated Values (see column_separator= below). Returns an optional header row followed by one row for each transaction, with delimited values for each row. <code>https://{NETWORK NAME}.invoca.net/api/2020-10-01/networks/transactions/{NETWORK ID}.csv</code></td>
</tr>
<tr class="even">
<td>xml</td>
<td>Returns an XML document with an array of Transaction elements. <code>https://{NETWORK NAME}.invoca.net/api/2020-10-01/networks/transactions/{NETWORK ID}.xml</code></td>
</tr>
<tr class="odd">
<td>json</td>
<td>Returns a JSON array of transaction objects. <code>https://{NETWORK NAME}.invoca.net/api/2020-10-01/networks/transactions/{NETWORK ID}.json</code></td>
</tr>
</tbody>
</table>
<details open>
<summary>Schemes</summary>
    <ul>
        <li> JSON</li>
    <ul>
        <li> nested list 1</li>
        <li> nested list 2</li>
    </ul>
        <li>XML</li>
    </ul>
    <ul>
        <li>CSV</li>
    </ul>
        <ul>
        <li>cURL</li>
    </ul>
</details>
<h1 id="authentication"><a class="header" href="#authentication">Authentication</a></h1>
<p>The API uses OAuth to validate access. The OAuth Token can be passed in
two ways. The first way is to pass the OAuth Token in the header of the
request. The second is to pass the OAuth Token like any other query
parameter. Please note that the OAuth Token is a required parameter.
OAuth Tokens may be generated from the Manage API Credentials page.</p>
<h1 id="query-parameters"><a class="header" href="#query-parameters">Query Parameters</a></h1>
<p>The API takes the following optional query parameters:</p>
<table>
<colgroup>
<col style="width: 16%" />
<col style="width: 83%" />
</colgroup>
<thead>
<tr class="header">
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>from=</td>
<td>Starting date in user's time zone, in format YYYY-MM-DD. Example: 2011-06-01. Inclusive.</td>
</tr>
<tr class="even">
<td>to=</td>
<td>Ending date in user's time zone, in format YYYY-MM-DD. Example: 2011-06-07. Inclusive.</td>
</tr>
<tr class="odd">
<td>limit=</td>
<td>Max number of transactions to return at a time. Defaults to 1000. Limited to at most 4000.</td>
</tr>
<tr class="even">
<td>transaction_id=</td>
<td>A specific transaction. If transaction_id is specified and no transaction with that ID is found, nothing will be returned. Returns at most 1 transaction.</td>
</tr>
<tr class="odd">
<td>call_record_id=</td>
<td>All transactions belonging to a specific call. If call_record_id is specified and no call with that ID is found, nothing will be returned. Returns all transactions belonging to the call record. <strong>Note:</strong> If transaction_id <em>and</em> call_record_id are passed, the specified transaction must belong to the specified call. If it does, the transaction will be returned. If it does not, nothing will be returned.</td>
</tr>
<tr class="even">
<td>start_after_transaction_id=</td>
<td>Transaction_id to start retrieving after. This should be the last value retrieved previously. Default (or empty string) means start at the oldest.</td>
</tr>
<tr class="odd">
<td>include_columns=</td>
<td>comma-separated list of field names to be returned in the response for each transaction (if not specified, all available fields for the account will be returned, minus any columns in exclude_columns)</td>
</tr>
<tr class="even">
<td>exclude_columns=</td>
<td>comma-separated list of field names to be excluded in the response for each transaction</td>
</tr>
<tr class="odd">
<td>column_separator=</td>
<td>[.csv format only] Separator between columns. Default is , for comma-separated values. (Can be set to any other separator like | for pipe-separated values or %09 for tab-separated values.)</td>
</tr>
<tr class="even">
<td>row_separator=</td>
<td>[.csv format only] Separator between lines. Defaults to %0A for n (line feed). Use %0D%0A for rn (carriage return + line feed).</td>
</tr>
<tr class="odd">
<td>include_header=</td>
<td>[.csv format only] 1 to include a header row; 0 to omit the header row. Default is 1.</td>
</tr>
<tr class="even">
<td>force_quotes=</td>
<td>[.csv format only] 1 to quote all CSV fields; 0 to only quote fields that contain separators. Default is 0.</td>
</tr>
<tr class="odd">
<td>transaction_type=</td>
<td>Filters for the type of transaction. Valid inputs are Call, PostCallEvent, Sale, or Signal. Sale maps to the Reported Conversion type.</td>
</tr>
</tbody>
</table>
<p>In order to ensure that all transactions are returned when using the
<code>from=</code> and <code>to=</code> date query parameters, you should store the last
transaction id you have downloaded and pass it as the
<code>start_after_transaction_id</code> to the next request. Typical usage on the
polling interval is to repeatedly call the API until no rows are
returned, meaning you have downloaded all transactions. Please note, the
&quot;to&quot; and &quot;from&quot; date range parameters are both necessary, providing only
one or the other will not filter the results.</p>
<h2 id="constants"><a class="header" href="#constants">Constants</a></h2>
<p>We provide three helpful constants that can be used in the
<code>include_columns</code> and <code>exclude_columns</code> options:</p>
<blockquote>
<p><span class="title-ref"><code>$invoca_custom_columns</code></span> a dynamic
constant that represents the current list of your Marketing Data
Fields. </p>
<blockquote>
<p><b> Note: </b> If the list of custom columns changes, those changes
will be included in future API calls that use
<code>include_columns=$invoca_custom_columns</code>, independent of the API
version. See Marketing Data Parameters section for more details.</p>
</blockquote>
<p><span class="title-ref"><code>$invoca_custom_source_columns</code></span> a
dynamic constant that represents the sources for the current list of
your Marketing Data Fields. </p>
<blockquote>
<p><b> Note: </b> If the list of custom columns
changes, those changes will be included in future API calls that use
<code>include_columns=$invoca_custom_source_columns</code>, independent of
the API version. See Marketing Data Parameters section for more
details.</p>
</blockquote>
<p><span class="title-ref"><code>$invoca_default_columns</code></span> represents
the default set of columns provided by the Transactions API for your
requested version</p>
</blockquote>
<h2 id="response-1"><a class="header" href="#response-1">Response</a></h2>
<h3 id="general-parameters"><a class="header" href="#general-parameters">General Parameters</a></h3>
<table>
<colgroup>
<col style="width: 38%" />
<col style="width: 10%" />
<col style="width: 51%" />
</colgroup>
<thead>
<tr class="header">
<th>Field</th>
<th>Name in Reports</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>advertiser_call_fee_localized</td>
<td>Advertiser Fees</td>
<td>Advertiser Telecommunications fee associated with transaction</td>
</tr>
<tr class="even">
<td>advertiser_campaign_id</td>
<td>Advertiser Campaign ID (Invoca ID)</td>
<td>The Invoca identifier of the campaign.</td>
</tr>
<tr class="odd">
<td>advertiser_campaign_id_from_network</td>
<td>Advertiser Campaign ID</td>
<td>The Campaign ID from the network as set on the advertiser campaign.</td>
</tr>
<tr class="even">
<td>advertiser_campaign_name</td>
<td>Advertiser Campaign</td>
<td>Name of the campaign.</td>
</tr>
<tr class="odd">
<td>advertiser_campaign_country</td>
<td>Advertiser Campaign Country</td>
<td>Country of the campaign.</td>
</tr>
<tr class="even">
<td>advertiser_id</td>
<td>Advertiser ID (Invoca ID)</td>
<td>The Invoca identifier of the advertiser</td>
</tr>
<tr class="odd">
<td>advertiser_id_from_network</td>
<td>Advertiser ID</td>
<td>Advertiser ID from the network as set on the Invoca advertiser.</td>
</tr>
<tr class="even">
<td>advertiser_name</td>
<td>Advertiser</td>
<td>Name of the advertiser.</td>
</tr>
<tr class="odd">
<td>advertiser_payin_localized</td>
<td>Earned</td>
<td>Amount paid in by advertiser</td>
</tr>
<tr class="even">
<td>affiliate_call_volume_ranking</td>
<td>Affiliate Volume Ranking</td>
<td>Network ranking of affiliate's call volume (0 to 5, and -1 being 'new'). Blank if no affiliate.</td>
</tr>
<tr class="odd">
<td>affiliate_commissions_ranking</td>
<td>Affiliate Commissions Ranking</td>
<td>Network ranking of affiliate's commissions (0 to 5, and -1 being 'new'). Blank if no affiliate.</td>
</tr>
<tr class="even">
<td>affiliate_conversion_rate_ranking</td>
<td>Affiliate Conversion Rate Ranking</td>
<td>Network ranking of affiliate's conversion rate (0 to 5, and -1 being 'new'). Blank if no affiliate.</td>
</tr>
<tr class="odd">
<td>affiliate_id</td>
<td>Affiliate ID (Invoca ID)</td>
<td>The Invoca identifier of the affiliate</td>
</tr>
<tr class="even">
<td>affiliate_id_from_network</td>
<td>Affiliate ID</td>
<td>Affiliate ID from the network as set on the Invoca affiliate.</td>
</tr>
<tr class="odd">
<td>affiliate_name</td>
<td>Affiliate</td>
<td>Name of the affiliate</td>
</tr>
<tr class="even">
<td>affiliate_payout_localized</td>
<td>Paid</td>
<td>Amount paid out to the affiliate</td>
</tr>
<tr class="odd">
<td>call_fee_localized</td>
<td>Fees</td>
<td>Telecommunications fee associated with transaction</td>
</tr>
<tr class="even">
<td>call_result_description_detail</td>
<td>Call Result</td>
<td>Status of the transaction</td>
</tr>
<tr class="odd">
<td>call_source_description</td>
<td>Source</td>
<td>Source of the transaction</td>
</tr>
<tr class="even">
<td>calling_phone_number</td>
<td>Caller ID</td>
<td>Caller ID. Formatted as 12 characters, example: <code>866-555-1234</code></td>
</tr>
<tr class="odd">
<td>city</td>
<td>City</td>
<td>City where transaction originated</td>
</tr>
<tr class="even">
<td>complete_call_id</td>
<td>Call Record ID</td>
<td>Globally unique identifier for the call this transaction is part of. Up-to 32 character string, can contain alphanumeric characters (i.e. 0-9A-Z) and the <code>-</code>.</td>
</tr>
<tr class="odd">
<td>connect_duration</td>
<td>Connected Duration</td>
<td>Duration in seconds that the call that was connected to the call center.</td>
</tr>
<tr class="even">
<td>corrected_at</td>
<td>Corrected At</td>
<td>[Correction only] Date and time the transaction was corrected, in user's time zone, followed by offset from GMT.</td>
</tr>
<tr class="odd">
<td>corrects_transaction_id</td>
<td>Corrects Call</td>
<td>[Correction only] Id of the original transaction that this transaction updates. Values in this row are the corrected ones and should replace the original values. Same format as <code>transaction_id</code>. Up-to 32 character string, can contain alphanumeric characters (i.e. 0-9A-Z) and the -.</td>
</tr>
<tr class="even">
<td>custom_data</td>
<td>Array of Signals & Marketing Data Values</td>
<td>JSON and XML formats only. This field is not included in response by default, and must be specified in the <code>include_columns</code> parameter. See table below for more information about the structure of this array.</td>
</tr>
<tr class="odd">
<td>destination_phone_number</td>
<td>Destination Phone Number</td>
<td>The phone number where the call was transferred to (useful if an IVR transfers to multiple destinations). Up-to 20 character string, can contain numeric characters (i.e. 0-9) and the following additional characters: '-', '#', '*', 'x', and ','. '</td>
</tr>
<tr class="even">
<td>duration</td>
<td>Total Duration</td>
<td>Duration of the call in seconds. Includes any time spent in an IVR tree before transferring to the call center.</td>
</tr>
<tr class="odd">
<td>ivr_duration</td>
<td>IVR Duration</td>
<td>Duration in seconds that the call spent in the IVR tree.</td>
</tr>
<tr class="even">
<td>keypress_1</td>
<td>Key 1</td>
<td>Name of the first key that was pressed</td>
</tr>
<tr class="odd">
<td>keypress_2</td>
<td>Key 2</td>
<td>Name of the second key that was pressed</td>
</tr>
<tr class="even">
<td>keypress_3</td>
<td>Key 3</td>
<td>Name of the third key that was pressed</td>
</tr>
<tr class="odd">
<td>keypress_4</td>
<td>Key 4</td>
<td>Name of the fourth key that was pressed</td>
</tr>
<tr class="even">
<td>keypresses</td>
<td>Keypresses</td>
<td>List of unique keynames that were pressed during the call</td>
</tr>
<tr class="odd">
<td>margin_localized</td>
<td>Margin</td>
<td>Difference between <code>advertiser_payin_localized</code> and <code>affiliate_payout_localized</code></td>
</tr>
<tr class="even">
<td>matching_advertiser_payin_policies</td>
<td>Matching Advertiser Payin Policies</td>
<td>List of advertiser policies that matched (base, bonus1, bonus2, etc.) to determine the advertiser payin, separated by +. For example, base+bonus1+bonus3. Note that if there was any advertiser payin, this field guaranteed to start with base.</td>
</tr>
<tr class="odd">
<td>matching_affiliate_payout_policies</td>
<td>Matching Affiliate Payout Policies</td>
<td>List of affiliate policies that matched (base, bonus1, bonus2, etc.) to determine the affiliate payout, separated by +. For example, base+bonus2. Note that if there was any affiliate payout, this field guaranteed to start with base.</td>
</tr>
<tr class="even">
<td>media_type</td>
<td>Media Type</td>
<td>Media type of the transaction source</td>
</tr>
<tr class="odd">
<td>mobile</td>
<td>Phone Type</td>
<td>Landline or Mobile or empty string if type is unknown</td>
</tr>
<tr class="even">
<td>notes</td>
<td>Notes</td>
<td>Free-form notations on transaction</td>
</tr>
<tr class="odd">
<td>opt_in_SMS</td>
<td>Opt In Sms</td>
<td>Whether the caller opted in to receive an SMS promotion.</td>
</tr>
<tr class="even">
<td>original_order_id</td>
<td>Order ID</td>
<td>[Sales reporting only] Id of the original transaction that this row is in reference to. Up-to 32 character string, can contain alphanumeric characters (i.e. 0-9A-Z) and the -.</td>
</tr>
<tr class="odd">
<td>payin_conditions</td>
<td>Payin Conditions</td>
<td>Base condition with highlighting around the term(s) that disqualified advertiser payin. For example: duration &gt; 1 min and in_region</td>
</tr>
<tr class="even">
<td>payout_conditions</td>
<td>Payout Conditions</td>
<td>Base condition with highlighting around the term(s) that disqualified affiliate payout. For example: duration &gt; 1 min and in_region</td>
</tr>
<tr class="odd">
<td>qualified_regions</td>
<td>Qualified Regions</td>
<td>The list of regions that that the caller matched</td>
</tr>
<tr class="even">
<td>recording</td>
<td>Recording</td>
<td>URL to the call recording, if available</td>
</tr>
<tr class="odd">
<td>recording_download_url</td>
<td>(Not Present)</td>
<td>Signed URL to download the call recording. Only present if the feature is enabled for the network.</td>
</tr>
<tr class="even">
<td>region</td>
<td>Region</td>
<td>Region (state, province or country) where transaction originated</td>
</tr>
<tr class="odd">
<td>repeat_calling_phone_number</td>
<td>Repeat Caller</td>
<td>Whether the call was a repeat call. Repeat call detection is not applied to shared or unavailable caller ids.</td>
</tr>
<tr class="even">
<td>start_time_local</td>
<td>Call Start Time</td>
<td>Start of the call in the API user's time zone, followed by offset from GMT.</td>
</tr>
<tr class="odd">
<td>start_time_utc</td>
<td>Call Start Time (UTC timestamp)</td>
<td>Start of the call in milliseconds since Jan 1, 1970. Divide by 1000 to get Unix epoch time.</td>
</tr>
<tr class="even">
<td>start_time_xml</td>
<td>Call Start Time (XML formatted)</td>
<td>Start of the call in the API user's time zone in Soap XML formatted time.</td>
</tr>
<tr class="odd">
<td>start_time_network_timezone</td>
<td>Call Start Time Network Timezone</td>
<td>Start of the call in the networks's time zone, followed by offset from GMT.</td>
</tr>
<tr class="even">
<td>start_time_network_timezone_xml</td>
<td>Call Start Time Network Timezone (XML formatted)</td>
<td>Start of the call in the network's time zone in Soap XML formatted time.</td>
</tr>
<tr class="odd">
<td>transaction_id</td>
<td>Transaction ID</td>
<td>Globally unique identifier for this transaction. Up-to 32 character string, can contain alphanumeric characters (i.e. 0-9A-Z) and the -. This is the Primary Key of the results.</td>
</tr>
<tr class="even">
<td>transaction_type</td>
<td>Type</td>
<td>The type of transaction - Call, Post Call Event, Reported Conversion, or Signal.</td>
</tr>
<tr class="odd">
<td>transfer_from_type</td>
<td>Transfer Type</td>
<td>Where the call came from</td>
</tr>
<tr class="even">
<td>verified_zip</td>
<td>Verified Zip Code</td>
<td>Zip Code entered by callers when prompted during call treatment</td>
</tr>
<tr class="odd">
<td>hangup_cause</td>
<td>End of Call Reason</td>
<td>Who ended the call along with how it was ended</td>
</tr>
<tr class="even">
<td>virtual_line_id</td>
<td>Promo Number ID</td>
<td>The Promo Number ID from the network</td>
</tr>
</tbody>
</table>
<h1 id="ringpool-parameters"><a class="header" href="#ringpool-parameters">RingPool Parameters</a></h1>
<table>
<colgroup>
<col style="width: 38%" />
<col style="width: 10%" />
<col style="width: 51%" />
</colgroup>
<thead>
<tr class="header">
<th>Field</th>
<th>Name in Reports</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>dynamic_number_pool_id</td>
<td>Pool ID</td>
<td>The ID of the pool.</td>
</tr>
<tr class="even">
<td>dynamic_number_pool_pool_type</td>
<td>Pool Type</td>
<td>The type of pool: Search, SearchKeyword or Custom</td>
</tr>
<tr class="odd">
<td>dynamic_number_pool_referrer_param1_name</td>
<td>Pool Param 1 Name</td>
<td>The name for parameter 1</td>
</tr>
<tr class="even">
<td>dynamic_number_pool_referrer_param1_value</td>
<td>Pool Param 1 Value</td>
<td>The value for parameter 1</td>
</tr>
<tr class="odd">
<td>dynamic_number_pool_referrer_param2_name</td>
<td>Pool Param 2 Name</td>
<td>The name for parameter 2</td>
</tr>
<tr class="even">
<td>dynamic_number_pool_referrer_param2_value</td>
<td>Pool Param 2 Value</td>
<td>The value for parameter 2</td>
</tr>
<tr class="odd">
<td>dynamic_number_pool_referrer_param3_name</td>
<td>Pool Param 3 Name</td>
<td>The name for parameter 3</td>
</tr>
<tr class="even">
<td>dynamic_number_pool_referrer_param3_value</td>
<td>Pool Param 3 Value</td>
<td>The value for parameter 3</td>
</tr>
<tr class="odd">
<td>dynamic_number_pool_referrer_param4_name</td>
<td>Pool Param 4 Name</td>
<td>The name for parameter 4</td>
</tr>
<tr class="even">
<td>dynamic_number_pool_referrer_param4_value</td>
<td>Pool Param 4 Value</td>
<td>The value for parameter 4</td>
</tr>
<tr class="odd">
<td>dynamic_number_pool_referrer_param5_name</td>
<td>Pool Param 5 Name</td>
<td>The name for parameter 5</td>
</tr>
<tr class="even">
<td>dynamic_number_pool_referrer_param5_value</td>
<td>Pool Param 5 Value</td>
<td>The value for parameter 5</td>
</tr>
<tr class="odd">
<td>dynamic_number_pool_referrer_param6_name</td>
<td>Pool Param 6 Name</td>
<td>The name for parameter 6</td>
</tr>
<tr class="even">
<td>dynamic_number_pool_referrer_param6_value</td>
<td>Pool Param 6 Value</td>
<td>The value for parameter 6</td>
</tr>
<tr class="odd">
<td>dynamic_number_pool_referrer_param7_name</td>
<td>Pool Param 7 Name</td>
<td>The name for parameter 7</td>
</tr>
<tr class="even">
<td>dynamic_number_pool_referrer_param7_value</td>
<td>Pool Param 7 Value</td>
<td>The value for parameter 7</td>
</tr>
<tr class="odd">
<td>dynamic_number_pool_referrer_param8_name</td>
<td>Pool Param 8 Name</td>
<td>The name for parameter 8</td>
</tr>
<tr class="even">
<td>dynamic_number_pool_referrer_param8_value</td>
<td>Pool Param 8 Value</td>
<td>The value for parameter 8</td>
</tr>
<tr class="odd">
<td>dynamic_number_pool_referrer_param9_name</td>
<td>Pool Param 9 Name</td>
<td>The name for parameter 9</td>
</tr>
<tr class="even">
<td>dynamic_number_pool_referrer_param9_value</td>
<td>Pool Param 9 Value</td>
<td>The value for parameter 9</td>
</tr>
<tr class="odd">
<td>dynamic_number_pool_referrer_param10_name</td>
<td>Pool Param 10 Name</td>
<td>The name for parameter 10</td>
</tr>
<tr class="even">
<td>dynamic_number_pool_referrer_param10_value</td>
<td>Pool Param 10 Value</td>
<td>The value for parameter 10</td>
</tr>
<tr class="odd">
<td>dynamic_number_pool_referrer_param11_name</td>
<td>Pool Param 11 Name</td>
<td>The name for parameter 11</td>
</tr>
<tr class="even">
<td>dynamic_number_pool_referrer_param11_value</td>
<td>Pool Param 11 Value</td>
<td>The value for parameter 11</td>
</tr>
<tr class="odd">
<td>dynamic_number_pool_referrer_param12_name</td>
<td>Pool Param 12 Name</td>
<td>The name for parameter 12</td>
</tr>
<tr class="even">
<td>dynamic_number_pool_referrer_param12_value</td>
<td>Pool Param 12 Value</td>
<td>The value for parameter 12</td>
</tr>
<tr class="odd">
<td>dynamic_number_pool_referrer_param13_name</td>
<td>Pool Param 13 Name</td>
<td>The name for parameter 13</td>
</tr>
<tr class="even">
<td>dynamic_number_pool_referrer_param13_value</td>
<td>Pool Param 13 Value</td>
<td>The value for parameter 13</td>
</tr>
<tr class="odd">
<td>dynamic_number_pool_referrer_param14_name</td>
<td>Pool Param 14 Name</td>
<td>The name for parameter 14</td>
</tr>
<tr class="even">
<td>dynamic_number_pool_referrer_param14_value</td>
<td>Pool Param 14 Value</td>
<td>The value for parameter 14</td>
</tr>
<tr class="odd">
<td>dynamic_number_pool_referrer_param15_name</td>
<td>Pool Param 15 Name</td>
<td>The name for parameter 15</td>
</tr>
<tr class="even">
<td>dynamic_number_pool_referrer_param15_value</td>
<td>Pool Param 15 Value</td>
<td>The value for parameter 15</td>
</tr>
<tr class="odd">
<td>dynamic_number_pool_referrer_param16_name</td>
<td>Pool Param 16 Name</td>
<td>The name for parameter 16</td>
</tr>
<tr class="even">
<td>dynamic_number_pool_referrer_param16_value</td>
<td>Pool Param 16 Value</td>
<td>The value for parameter 16</td>
</tr>
<tr class="odd">
<td>dynamic_number_pool_referrer_param17_name</td>
<td>Pool Param 17 Name</td>
<td>The name for parameter 17</td>
</tr>
<tr class="even">
<td>dynamic_number_pool_referrer_param17_value</td>
<td>Pool Param 17 Value</td>
<td>The value for parameter 17</td>
</tr>
<tr class="odd">
<td>dynamic_number_pool_referrer_param18_name</td>
<td>Pool Param 18 Name</td>
<td>The name for parameter 18</td>
</tr>
<tr class="even">
<td>dynamic_number_pool_referrer_param18_value</td>
<td>Pool Param 18 Value</td>
<td>The value for parameter 18</td>
</tr>
<tr class="odd">
<td>dynamic_number_pool_referrer_param19_name</td>
<td>Pool Param 19 Name</td>
<td>The name for parameter 19</td>
</tr>
<tr class="even">
<td>dynamic_number_pool_referrer_param19_value</td>
<td>Pool Param 19 Value</td>
<td>The value for parameter 19</td>
</tr>
<tr class="odd">
<td>dynamic_number_pool_referrer_param20_name</td>
<td>Pool Param 20 Name</td>
<td>The name for parameter 20</td>
</tr>
<tr class="even">
<td>dynamic_number_pool_referrer_param20_value</td>
<td>Pool Param 20 Value</td>
<td>The value for parameter 20</td>
</tr>
<tr class="odd">
<td>dynamic_number_pool_referrer_param21_name</td>
<td>Pool Param 21 Name</td>
<td>The name for parameter 21</td>
</tr>
<tr class="even">
<td>dynamic_number_pool_referrer_param21_value</td>
<td>Pool Param 21 Value</td>
<td>The value for parameter 21</td>
</tr>
<tr class="odd">
<td>dynamic_number_pool_referrer_param22_name</td>
<td>Pool Param 22 Name</td>
<td>The name for parameter 22</td>
</tr>
<tr class="even">
<td>dynamic_number_pool_referrer_param22_value</td>
<td>Pool Param 22 Value</td>
<td>The value for parameter 22</td>
</tr>
<tr class="odd">
<td>dynamic_number_pool_referrer_param23_name</td>
<td>Pool Param 23 Name</td>
<td>The name for parameter 23</td>
</tr>
<tr class="even">
<td>dynamic_number_pool_referrer_param23_value</td>
<td>Pool Param 23 Value</td>
<td>The value for parameter 23</td>
</tr>
<tr class="odd">
<td>dynamic_number_pool_referrer_param24_name</td>
<td>Pool Param 24 Name</td>
<td>The name for parameter 24</td>
</tr>
<tr class="even">
<td>dynamic_number_pool_referrer_param24_value</td>
<td>Pool Param 24 Value</td>
<td>The value for parameter 24</td>
</tr>
<tr class="odd">
<td>dynamic_number_pool_referrer_param25_name</td>
<td>Pool Param 25 Name</td>
<td>The name for parameter 25</td>
</tr>
<tr class="even">
<td>dynamic_number_pool_referrer_param25_value</td>
<td>Pool Param 25 Value</td>
<td>The value for parameter 25</td>
</tr>
<tr class="odd">
<td>dynamic_number_pool_referrer_search_engine</td>
<td>Traffic Source</td>
<td>Search engine used.</td>
</tr>
<tr class="even">
<td>dynamic_number_pool_referrer_search_keywords</td>
<td>Keywords</td>
<td>Search keywords used</td>
</tr>
<tr class="odd">
<td>dynamic_number_pool_referrer_search_type</td>
<td>Search Type</td>
<td>Paid or Organic.</td>
</tr>
</tbody>
</table>
<h3 id="additional-feature-parameters"><a class="header" href="#additional-feature-parameters">Additional Feature Parameters</a></h3>
<p>Example 1: Get the next 20 transactions that occurred after transaction
id C624DA2C-CF3367C3:</p>
<pre><code>curl -k 'https://{Network Name}.invoca.net/api/2020-10-01/networks/transactions/{NETWORK ID}.csv?limit=20&amp;start_after_transaction_id=C624DA2C-CF3367C3&amp;oauth_token=YbcFH'
</code></pre>
<p>Example 2: Get 50 rows from a specific time period with only the
transaction_id and all Marketing Data columns:</p>
<pre><code>curl -k 'https://{Network Name}.invoca.net/api/2020-10-01/networks/transactions/{NETWORK ID}.csv?limit=50&amp;include_columns=transaction_id,$invoca_custom_columns&amp;exclude_columns=$invoca_default_columns&amp;from=2015-03-26&amp;to=2015-03-27&amp;oauth_token=YbcFH'
</code></pre>
<p>Example 3: Get 50 rows that exclude a few columns such as Caller ID and
Call Recordings:</p>
<pre><code>curl -k 'https://{Network Name}.invoca.net/api/2020-10-01/networks/transactions/{NETWORK ID}.csv?limit=50&amp;exclude_columns=calling_phone_number,recording&amp;start_after_transaction_id=C624DA2C-CF3367C3&amp;oauth_token=YbcFH'
</code></pre>
<p>Example 4: Get All Transactions from a specific time period that are of
transaction_type Signal:</p>
<pre><code>curl -k 'https://{Network Name}.invoca.net/api/2020-10-01/networks/transactions/{NETWORK ID}.csv?transaction_type=Signal&amp;from=2015-03-24&amp;to=2015-03-27&amp;oauth_token=YbcFH'
</code></pre>
<p>Example 5: Get All Transactions from a specific time period that are of
transaction_type Post Call Event:</p>
<pre><code>curl -k 'https://{Network Name}.invoca.net/api/2020-10-01/networks/transactions/{NETWORK ID}.csv?transaction_type=PostCallEvent&amp;from=2015-03-24&amp;to=2015-03-27&amp;oauth_token=YbcFH'
</code></pre>
<p>Example 6: Get All Transactions from a specific time period that are of
transaction_type Call and Signal:</p>
<pre><code>curl -k 'https://{Network Name}.invoca.net/api/2020-10-01/networks/transactions/{NETWORK ID}.csv?transaction_type[]=Call&amp;transaction_type[]=Signal&amp;from=2015-03-24&amp;to=2015-03-27&amp;oauth_token=YbcFH'
</code></pre>
<p>Example 7: Get All Transactions from a specific time period with oauth
token in the request header:</p>
<pre><code>curl -k -H 'Authorization: YbcFH' 'https://{Network Name}.invoca.net/api/2020-10-01/networks/transactions/{NETWORK ID}.csv?transaction_type[]=Call&amp;transaction_type[]=Signal&amp;transaction_type[]=PostCallEvent&amp;from=2015-03-24&amp;to=2015-03-27'
</code></pre>
<p>Endpoint:</p>
<p><code>https://invoca.net/api/2020-10-01/networks/transactions/&lt;network_id&gt;.&lt;format&gt;</code></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="advertiser--merchant"><a class="header" href="#advertiser--merchant">Advertiser / Merchant</a></h1>
<h2 id="url"><a class="header" href="#url">URL</a></h2>
<p>The API follows REST conventions. Perform an HTTPS GET to the URL with
the format in which you’d like to receive data. The following response
formats are supported, where 33 is the advertiser id.</p>
<table>
<colgroup>
<col style="width: 16%" />
<col style="width: 83%" />
</colgroup>
<thead>
<tr class="header">
<th>Format</th>
<th>Description and URL</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>csv</td>
<td>Comma-Separated Values, or really Anything-Separated Values (see column_separator= below). Returns an optional header row followed by one row for each transaction, with delimited values for each row. <code>https://mynetwork.invoca.net/api/@@TRANSACTION_API_VERSION/advertisers/transactions/33.csv</code></td>
</tr>
<tr class="even">
<td>xml</td>
<td>Returns an XML document with an array of Transaction elements. <code>https://mynetwork.invoca.net/api/@@TRANSACTION_API_VERSION/advertisers/transactions/33.xml</code></td>
</tr>
<tr class="odd">
<td>json</td>
<td>Returns a JSON array of transaction objects. <code>https://mynetwork.invoca.net/api/@@TRANSACTION_API_VERSION/advertisers/transactions/33.json</code></td>
</tr>
</tbody>
</table>
<h2 id="response-2"><a class="header" href="#response-2">Response</a></h2>
<h3 id="general-parameters-1"><a class="header" href="#general-parameters-1">General Parameters</a></h3>
<h3 id="additional-feature-parameters-1"><a class="header" href="#additional-feature-parameters-1">Additional Feature Parameters</a></h3>
<p>Example 1: Get the next 20 transactions that occurred after transaction
id C624DA2C-CF3367C3:</p>
<pre><code>curl -k 'https://mynetwork.invoca.net/api/@@TRANSACTION_API_VERSION/advertisers/transactions/33.csv?limit=20&amp;start_after_transaction_id=C624DA2C-CF3367C3&amp;oauth_token=YbcFH'
</code></pre>
<p>Example 2: Get 50 rows from a specific time period with only the
transaction_id and all Marketing Data columns:</p>
<pre><code>curl -k 'https://mynetwork.invoca.net/api/@@TRANSACTION_API_VERSION/advertisers/transactions/33.csv?limit=50&amp;include_columns=transaction_id,$invoca_custom_columns&amp;exclude_columns=$invoca_default_columns&amp;from=2015-03-26&amp;to=2015-03-27&amp;oauth_token=YbcFH'
</code></pre>
<p>Example 3: Get 50 rows that exclude a few columns such as Caller ID and
Call Recordings:</p>
<pre><code>curl -k 'https://mynetwork.invoca.net/api/@@TRANSACTION_API_VERSION/advertisers/transactions/33.csv?limit=50&amp;exclude_columns=calling_phone_number,recording&amp;start_after_transaction_id=C624DA2C-CF3367C3&amp;oauth_token=YbcFH'
</code></pre>
<p>Example 4: Get All Transactions from a specific time period that are of
transaction_type Signal:</p>
<pre><code>curl -k 'https://mynetwork.invoca.net/api/@@TRANSACTION_API_VERSION/advertisers/transactions/33.csv?transaction_type=Signal&amp;from=2015-03-24&amp;to=2015-03-27&amp;oauth_token=YbcFH'
</code></pre>
<p>Example 5: Get All Transactions from a specific time period that are of
transaction_type Post Call Event:</p>
<pre><code>curl -k 'https://mynetwork.invoca.net/api/@@TRANSACTION_API_VERSION/advertisers/transactions/33.csv?transaction_type=PostCallEvent&amp;from=2015-03-24&amp;to=2015-03-27&amp;oauth_token=YbcFH'
</code></pre>
<p>Example 6: Get All Transactions from a specific time period that are of
transaction_type Call and Signal:</p>
<pre><code>curl -k 'https://mynetwork.invoca.net/api/@@TRANSACTION_API_VERSION/advertisers/transactions/33.csv?transaction_type[]=Call&amp;transaction_type[]=Signal&amp;from=2015-03-24&amp;to=2015-03-27&amp;oauth_token=YbcFH'
</code></pre>
<p>Example 7: Get All Transactions from a specific time period with oauth
token in the request header:</p>
<pre><code>curl -k -H 'Authorization: YbcFH' 'https://mynetwork.invoca.net/api/@@TRANSACTION_API_VERSION/advertisers/transactions/33.csv?transaction_type[]=Call&amp;transaction_type[]=Signal&amp;transaction_type[]=PostCallEvent&amp;from=2015-03-24&amp;to=2015-03-27'
</code></pre>
<p>Endpoint:</p>
<p><code>https://invoca.net/api/@@TRANSACTION_API_VERSION/advertisers/transactions/&lt;advertiser_id&gt;.&lt;format&gt;</code></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="publisher--affiliate"><a class="header" href="#publisher--affiliate">Publisher / Affiliate</a></h1>
<h2 id="url-1"><a class="header" href="#url-1">URL</a></h2>
<p>The API follows REST conventions. Perform an HTTPS GET to the URL with
the format in which you’d like to receive data. The following response
formats are supported, where 33 is the affiliate id.</p>
<table>
<colgroup>
<col style="width: 16%" />
<col style="width: 83%" />
</colgroup>
<thead>
<tr class="header">
<th>Format</th>
<th>Description and URL</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>csv</td>
<td>Comma-Separated Values, or really Anything-Separated Values (see column_separator= below). Returns an optional header row followed by one row for each transaction, with delimited values for each row. <code>https://mynetwork.invoca.net/api/@@TRANSACTION_API_VERSION/affiliates/transactions/33.csv</code></td>
</tr>
<tr class="even">
<td>xml</td>
<td>Returns an XML document with an array of Transaction elements. <code>https://mynetwork.invoca.net/api/@@TRANSACTION_API_VERSION/affiliates/transactions/33.xml</code></td>
</tr>
<tr class="odd">
<td>json</td>
<td>Returns a JSON array of transaction objects. <code>https://mynetwork.invoca.net/api/@@TRANSACTION_API_VERSION/affiliates/transactions/33.json</code></td>
</tr>
</tbody>
</table>
<h2 id="response-3"><a class="header" href="#response-3">Response</a></h2>
<h3 id="general-parameters-2"><a class="header" href="#general-parameters-2">General Parameters</a></h3>
<h3 id="additional-feature-parameters-2"><a class="header" href="#additional-feature-parameters-2">Additional Feature Parameters</a></h3>
<p>Example 1: Get the next 20 transactions that occurred after transaction
id C624DA2C-CF3367C3:</p>
<pre><code>curl -k 'https://mynetwork.invoca.net/api/@@TRANSACTION_API_VERSION/affiliates/transactions/33.csv?limit=20&amp;start_after_transaction_id=C624DA2C-CF3367C3&amp;oauth_token=YbcFH'
</code></pre>
<p>Example 2: Get 50 rows from a specific time period with only the
transaction_id and duration columns:</p>
<pre><code>curl -k 'https://mynetwork.invoca.net/api/@@TRANSACTION_API_VERSION/affiliates/transactions/33.csv?limit=50&amp;include_columns=transaction_id,duration&amp;from=2015-03-26&amp;to=2015-03-27&amp;oauth_token=YbcFH'
</code></pre>
<p>Example 3: Get 50 rows that exclude a few columns such as city and
region:</p>
<pre><code>curl -k 'https://mynetwork.invoca.net/api/@@TRANSACTION_API_VERSION/affiliates/transactions/33.csv?limit=50&amp;exclude_columns=city,region&amp;start_after_transaction_id=C624DA2C-CF3367C3&amp;oauth_token=YbcFH'
</code></pre>
<p>Example 4: Get All Transactions from a specific time period that are of
transaction_type Signal:</p>
<pre><code>curl -k 'https://mynetwork.invoca.net/api/@@TRANSACTION_API_VERSION/affiliates/transactions/33.csv?transaction_type=Signal&amp;from=2015-03-24&amp;to=2015-03-27&amp;oauth_token=YbcFH'
</code></pre>
<p>Example 5: Get All Transactions from a specific time period that are of
transaction_type Post Call Event:</p>
<blockquote>
<pre><code>curl -k 'https://mynetwork.invoca.net/api/@@TRANSACTION_API_VERSION/affiliates/transactions/33.csv?transaction_type=PostCallEvent&amp;from=2015-03-24&amp;to=2015-03-27&amp;oauth_token=YbcFH'
</code></pre>
</blockquote>
<p>Example 6: Get All Transactions from a specific time period that are of
transaction_type Call and Signal:</p>
<pre><code>curl -k 'https://mynetwork.invoca.net/api/@@TRANSACTION_API_VERSION/affiliates/transactions/33.csv?transaction_type[]=Call&amp;transaction_type[]=Signal&amp;from=2015-03-24&amp;to=2015-03-27&amp;oauth_token=YbcFH'
</code></pre>
<p>Example 7: Get All Transactions from a specific time period with oauth
token in the request header:</p>
<pre><code>curl -k -H 'Authorization: YbcFH' 'https://mynetwork.invoca.net/api/@@TRANSACTION_API_VERSION/affiliates/transactions/33.csv?transaction_type[]=Call&amp;transaction_type[]=Signal&amp;transaction_type[]=PostCallEVent&amp;from=2015-03-24&amp;to=2015-03-27'
</code></pre>
<p>Endpoint:</p>
<p><code>https://invoca.net/api/@@TRANSACTION_API_VERSION/affiliates/transactions/&lt;affiliate_id&gt;.&lt;format&gt;</code></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="network-integration"><a class="header" href="#network-integration">Network Integration</a></h1>
<p>Invoca customers and partners can integrate with the Invoca Marketing
Automation platform through use of the Invoca Network Integration API.
The API offers interfaces for managing: Single sign on from network
partner web sites into the Invoca Marketing Automation platform.
Replication between network partner platforms and the Invoca platform
via REST style Create, Read, Update and Delete operations. Including:
Advertisers and their Users Affiliates and their Users Advertiser
Campaigns Campaign Terms RingPools Promo Numbers Auto-Approve Affiliate
to Campaigns</p>
<h2 id="terminology"><a class="header" href="#terminology">Terminology</a></h2>
<p>The API uses the following terms and their aliases: &quot;advertiser&quot; (also
known as &quot;merchant&quot;) “affiliate&quot; (also known as &quot;publisher&quot;) &quot;campaign&quot;
(also known as &quot;offer&quot;)</p>
<p><a href="api_documentation/network_integration/advertiser/campaigns/index.html">Advertiser Campaigns</a></p>
<p><a href="api_documentation/network_integration/advertiser_users/index.html">Advertisers</a></p>
<p>advertiser_users/index advertisers/index
affiliate_campaigns/index affiliates/index
advertiser_affiliate_relationships/index networks/index
promo_numbers/index call_activity_tracking/index
call_recording_condition/index prompt_recordings/index
set_call_recorded_prompt/index whisper_prompts/index
custom_challenge_prompts/index custom_ivr_error_prompts/index
automated_speech_recognition/index ringpools/index</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="bulk-ringpool-api"><a class="header" href="#bulk-ringpool-api">Bulk Ringpool API</a></h1>
<p>Before using the Bulk RingPool API, contact <a href="mailto:api_documentation/questions@invoca.com">questions@invoca.com</a> to
enable the Bulk RingPool API feature. It is recommended that before you
enable the feature on your production platform, testing occurs on a demo
or test platform.</p>
<h2 id="overview"><a class="header" href="#overview">Overview</a></h2>
<p>The Bulk RingPool API is designed to efficiently handle a high volume of
requests per second. A persistent connection is strongly recommended.</p>
<p>The Bulk RingPool API can be enabled on the Network, Advertiser, or
Publisher level. Note that once enabled, all new or edited RingPools are
served by the Bulk RingPool API and not the RingPool API. Therefore, if
the Bulk RingPool API is enabled for your organization, attempting to
access a RingPool with the RingPool API results in an error.</p>
<p>Finally, also note that only the custom RingPool type is supported by
the Bulk RingPool API.</p>
<p><strong>Example API URL:</strong></p>
<p><code>POST https://pnapi.invoca.net/api/@@PNAPI_VERSION/bulk.json</code></p>
<h2 id="request-body"><a class="header" href="#request-body">Request Body</a></h2>
<p>The JSON POST body of the request has a top level key &quot;request&quot; which
maps to an array of hashes, where each hash contains a RingPool API URL.
The array must contain at least one entry. The requests follow a similar
format to the RingPool API, which can be found here.</p>
<p>Each hash in the array must contain a key/value pair with a key of
&quot;api_suffix&quot;. The value must be the suffix of the RingPool API URL
after /api/&lt;date&gt;.</p>
<p>At least one RingPool parameter must be present in each allocation
request, even if the value is an empty string.</p>
<p>Each element may also include a key/value pair with a key of
&quot;request_id&quot;. If provided, it is echoed in the response for context.
This parameter is optional and does not have to be unique across the
hashes.</p>
<p>Individual responses and request IDs are returned in the same order as
the requests.</p>
<p>Below is an example of the JSON request body:</p>
<pre><code class="language-{.sourceCode .json}">{
 &quot;requests&quot;:[
  {&quot;api_suffix&quot;:&quot;&lt;RING_POOL_ID&gt;/allocate_number.json?ring_pool_key=&lt;RING_POOL_KEY&gt;&amp;m1=autos&amp;m2=ford&quot;,&quot;request_id&quot;:&quot;193C5F&quot;},
  {&quot;api_suffix&quot;:&quot;&lt;RING_POOL_ID&gt;/allocate_number.json?ring_pool_key=&lt;RING_POOL_KEY&gt;&amp;m1=antiques&quot;,&quot;request_id&quot;:&quot;58CD4F&quot;},
  {&quot;api_suffix&quot;:&quot;&lt;RING_POOL_ID&gt;/allocate_number.json?ring_pool_key=&lt;RING_POOL_KEY&gt;&amp;m1=electronics&quot;,&quot;request_id&quot;:&quot;E3901B&quot;}
 ]
}
</code></pre>
<h2 id="response-body"><a class="header" href="#response-body">Response Body</a></h2>
<p>The response format is in <strong>JSON</strong>.</p>
<p>Below is an example response (whitespace added for clarity):</p>
<pre><code class="language-{.sourceCode .json}">{
 &quot;responses&quot;:[
  {&quot;request_id&quot;:&quot;193C5F&quot;,&quot;promo_number_formatted&quot;:&quot;888-390-6665&quot;,&quot;promo_number&quot;:&quot;8883906665&quot;,&quot;tracking_url&quot;:&quot;http://ringrevenue.com/c/1/14-11-109?us=http%3A%2F%2Fwww2.ringrevenue.com.com%2Fdemo%2F8x8_staging.html%3Fsid%3D8883906665%26PPCPN%3D8883906665&quot;},
  {&quot;request_id&quot;:&quot;58CD4F&quot;,&quot;promo_number_formatted&quot;:&quot;877-455-1120&quot;,&quot;promo_number&quot;:&quot;8774551120&quot;,&quot;tracking_url&quot;:&quot;http://ringringrevenue.com/c/1/19-99-210?us=http%3A%2F%2Fwww2.ringrevenue.com%2Fdemo%2F8x8_staging.html%3Fsid%3D8774551120%26PPCPN%3D8774551120&quot;},
  {&quot;request_id&quot;:&quot;E3901B&quot;,&quot;promo_number_formatted&quot;:&quot;866-971-5703&quot;,&quot;promo_number&quot;:&quot;8669715703&quot;,&quot;tracking_url&quot;:&quot;http://ringringrevenue.com/c/1/38-240-19?us=http%3A%2F%2Fwww2.ringrevenue.com%2Fdemo%2F8x8_staging.html%3Fsid%3D8669715703%26PPCPN%3D8669715703&quot;,&quot;overflow&quot;:true}
 ]
}
</code></pre>
<p>Note the last response above has [&quot;overflow&quot;:true]{.title-ref}. This
indicates that the number returned is the overflow number for that
RingPool. To simplify the normal case when the number is not overflow,
the key-value pair is omitted when the value would be
[false]{.title-ref}.</p>
<p>Additionally, Bulk API responses return the total server processing
(this does not include transit) time for the request in the header under
the key &quot;processing-time&quot;, and is reported in milliseconds.</p>
<h2 id="errors"><a class="header" href="#errors">Errors</a></h2>
<p>The Bulk RingPool API clearly identifies errors when a request can not
be processed. For example, when the parameters are incorrect, an error
response will be returned for that row in the response as shown below:</p>
<pre><code class="language-{.sourceCode .json}">{
   &quot;responses&quot;:[
    {&quot;request_id&quot;:&quot;193C5F&quot;,&quot;promo_number_formatted&quot;:&quot;888-390-6665&quot;,&quot;promo_number&quot;:&quot;8883906665&quot;,&quot;tracking_url&quot;:&quot;http://ringrevenue.com/c/1/14-11-109?us=http%3A%2F%2Fwww2.ringrevenue.com.com%2Fdemo%2F8x8_staging.html%3Fsid%3D8883906665%26PPCPN%3D8883906665&quot;},
    {&quot;request_id&quot;:&quot;58CD4F&quot;,&quot;error_class&quot;:&quot;InvalidKey&quot;,&quot;message&quot;:&quot;API Key 'A329F4DC002168' is not valid for resource '1'&quot;},
    {&quot;request_id&quot;:&quot;E3901B&quot;,&quot;promo_number_formatted&quot;:&quot;866-971-5703&quot;,&quot;promo_number&quot;:&quot;8669715703&quot;,&quot;tracking_url&quot;:&quot;http://ringringrevenue.com/c/1/38-240-19?us=http%3A%2F%2Fwww2.ringrevenue.com%2Fdemo%2F8x8_staging.html%3Fsid%3D8669715703%26PPCPN%3D8669715703&quot;}
  ]
}
</code></pre>
<p>As another example, the following exception occurs when attempting to
allocate a number with the RingPool API against a RingPool that has been
set up to use the Bulk RingPool API:</p>
<pre><code class="language-{.sourceCode .json}">{
    &quot;errors&quot;:
    {
        &quot;invalid_data&quot;:&quot;Numbers are automatically allocated by the PNAPI server&quot;,
        &quot;class”:”OnlyBulkNumberAllocationAllowed&quot;
    }
}
</code></pre>
<p>If a system error occurs, an InternalServiceError will be returned with
an integer error handle.</p>
<p>Contact <a href="mailto:api_documentation/questions@invoca.com">questions@invoca.com</a> to determine the root cause of such an
error.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="signal-api"><a class="header" href="#signal-api">Signal API</a></h1>
<p>The Signal API is used to apply Signals and/or Custom Data Fields to
specific calls (transactions) after the call has occurred.</p>
<p>This can be very helpful if you need to apply specific data from other
systems if that data isn't available during the call.</p>
<p>Signals can be any boolean value (e.g. sale, quote, etc), and Custom
Data can be any alpha-numeric value (e.g. account type, customer quality
score, etc).</p>
<h2 id="response-codes"><a class="header" href="#response-codes">Response Codes</a></h2>
<p>Remember to check the HTTP status code returned. This helps greatly when
debugging.</p>
<table>
<colgroup>
<col style="width: 30%" />
<col style="width: 70%" />
</colgroup>
<thead>
<tr class="header">
<th>Status Code</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>200 OK</td>
<td>Request was accepted with all Signals and Custom data applied properly</td>
</tr>
<tr class="even">
<td>201 Created</td>
<td>Request was accepted with the <strong>call_in_progress</strong> parameter set to true</td>
</tr>
<tr class="odd">
<td>400 Bad Request</td>
<td>Attempted to make a request with an invalid API Version for route. Check the error message for any corrections to make</td>
</tr>
<tr class="even">
<td>401 Not Authorized</td>
<td>Invalid or missing oauth token</td>
</tr>
<tr class="odd">
<td>403 Forbidden</td>
<td>Attempted to access an invalid resource or provided invalid data. Check the errors object in the response.</td>
</tr>
<tr class="even">
<td>404 Not Found</td>
<td>Provided a transaction ID that was not found, or if using call start time and other search filters, no matching call found</td>
</tr>
</tbody>
</table>
<h2 id="request-parameters"><a class="header" href="#request-parameters">Request Parameters</a></h2>
<p>Passed in “application/json” format.</p>
<p><strong>Search Parameters</strong></p>
<p>Used to find the call associated with the signal.</p>
<blockquote>
<p><strong>Required</strong></p>
<p><span class="title-ref">transaction_id</span> The ID of the
transaction (Call leg) being reported on.</p>
<p>or</p>
<p><span class="title-ref">call_record_id</span> The ID of the complete
call being reported on.</p>
<p>or</p>
<p><span class="title-ref">call_start_time</span> The start time does
not have to be exact since clocks will not be perfectly synchronized.
We will find the closest match (in combination with
<strong>duration_in_seconds</strong>, if provided). See <strong>Timestamp Formats</strong>
section below for descriptions of supported timestamps.</p>
<p>Note: If using <strong>call_start_time</strong> to match, instead of
<strong>transaction_id</strong>, one or more of the following optional parameters
is highly recommended. The optional parameters are ignored when using
the <strong>transaction_id</strong>:</p>
<p><strong>Optional</strong></p>
<p><span class="title-ref">calling_phone_number</span> ANI in E.164
format +country national_number; example: ‘+18885551212’.</p>
<p><span class="title-ref">duration_in_seconds</span> Length of the
call. Used for finding the call that drove the sale. Like start time,
duration_in_seconds does not have to be exact, we use it to find the
closest match.</p>
<p><span class="title-ref">advertiser_id_from_network</span> ID from
network field on advertiser; only calls within this advertiser will be
considered (only allowed when reporting as network user, and
advertiser must be in same network).</p>
<p><span class="title-ref">advertiser_campaign_id_from_network</span>
ID from network field on advertiser campaign; only calls within this
advertiser campaign will be considered (campaign must be in the
organization accessed via API).</p>
<p><span class="title-ref">network_id</span> ID of the network.</p>
</blockquote>
<hr />
<p><strong>Signal Parameters</strong></p>
<p>Used to create the fields of a signal.</p>
<blockquote>
<p><strong>Required</strong></p>
<p><span class="title-ref">name</span> The name describing the signal
event. For reporting a sale happened on a call, “Sale” is recommended.
Other examples include “Free Trial”, “2yr Subscription”,
“Cancellation.” This can be used elsewhere in the system and should be
a small list of values meaningful to your organization. Names are
matched case-insensitively, but we will preserve and use the casing of
the first time the signal name is reported.</p>
<p><strong>Optional</strong></p>
<p><span class="title-ref">partner_unique_id</span> Unique identifier,
to distinguish between updating an existing signal (for example
correcting a sale that was reported) versus adding a second sale to
the call (for example a reservation made while on the call and then an
add on item purchased later). Note: this ID only needs to be unique
within the given transaction and <strong>name</strong>, so it can be as simple as
“1”, “2”… or it can be a globally unique ID if desired. Defaults to
empty string if not passed.</p>
<p><span class="title-ref">occurred_at_time</span> This allows batching
of signal results at a later time and still capture the exact time the
signal event happened. See <strong>Timestamp Formats</strong> section below for
descriptions of supported timestamps. Defaults to the time of the API
request if not provided.</p>
<p><span class="title-ref">revenue</span> Money with up to 2 decimal
places (period separated). Assumed to be in the same currency as the
organization that owns the signal being reported. Defaults to null if
not passed. (Recommended to omit parameter if no sale occurred,
instead of passing 0). Do not include formatting such as currency
symbol or separators (i.e. commas).</p>
<p><span class="title-ref">value</span> True or false as to whether the
signal was met or not. Defaults to true if not passed. Can be a string
‘true’ or ‘false’, or 1 (true) or 0 (false), Yes (true), or No
(false). These values are not case sensitive.</p>
</blockquote>
<hr />
<p><strong>Custom Data Parameters</strong></p>
<p>Apply Custom Data values to a call based on your Custom Data
configuration.</p>
<p>The Custom Data Fields provided in a request <strong>must</strong> already exist in
your <a href="https://www2.invoca.net/customer_data_dictionary/home">Custom Data
Configuration</a></p>
<blockquote>
<p><strong>Required</strong></p>
<p><span class="title-ref">name</span> The Partner (API) Name of the
Custom Data Field you want to apply a value to. Visit your <a href="https://www2.invoca.net/customer_data_dictionary/home">Custom
Data Management
Page</a> to view
your available Custom Data Fields.</p>
<p><span class="title-ref">value</span> The value you would like to apply
to the associated Custom Data Field for this call.</p>
</blockquote>
<hr />
<p><strong>Additional Parameters</strong></p>
<blockquote>
<p><strong>Required</strong></p>
<p><span class="title-ref">oauth_token</span> API token for
authentication. Can be specified in the body or header of the request.</p>
<p><strong>Optional</strong></p>
<p><span class="title-ref">call_in_progress</span> True or false as to
whether the call may still be in progress. Invoca will immediately
return a 201 and empty response body when this is set to true. When
the call finishes, Invoca will apply the signal. Defaults to false.</p>
<p>Note: <strong>call_in_progress</strong> can be passed, even when the call has
already finished. However, Invoca will only check for required fields
and all other errors will not be returned. It is highly recommended to
use <strong>transaction_id</strong> in the search parameters. If
<strong>call_start_time</strong> is used, please provide the
<strong>calling_phone_number</strong>, as well as any other information you can
provide, to help avoid matching with an earlier call.</p>
</blockquote>
<p>Endpoint:</p>
<p><code>https://invoca.net/api/@@SIGNAL_API_VERSION/transactions.json</code></p>
<h2 id="timestamp-formats"><a class="header" href="#timestamp-formats">Timestamp Formats</a></h2>
<p>The following formats are supported for both <span
class="title-ref">call_start_time</span> and <span
class="title-ref">occurred_at_time</span>.</p>
<p>All examples below correspond to a date time of <strong>11 April 2016</strong> at <strong>1
PM Pacific Time</strong>.</p>
<p><strong>Epoch:</strong> 10 digit timestamp in UTC seconds since 1/1/70, also known as
Unix time_t. UTC milliseconds since 1/1/70 (which is the default in
Javascript) are also supported, i.e. a 13 digit start time.</p>
<blockquote>
<p>Example (10 digits): <strong>1460404800</strong></p>
<p>Example (13 digits): <strong>1460404800000</strong></p>
</blockquote>
<p><strong>Compressed:</strong> 17 digit timestamp always parsed in UTC.</p>
<blockquote>
<p>Format: <strong>YYYYMMDDHHMMSSsss</strong></p>
<p>Example: <strong>20160411130000000</strong></p>
</blockquote>
<p><strong>ISO 8601:</strong> Timestamp with +/- UTC offset or Z to indicate time is in
UTC. Milliseconds are optional.</p>
<blockquote>
<p>Format: <strong>YYYY/MM/DDTHH:MM:SS.sss+hh:mm</strong></p>
<p>Example (UTC offset of +3 hours): <strong>2016/04/11T23:00:00.000+03:00</strong></p>
<p>Example (UTC offset of -7 hours): <strong>2016/04/11T13:00:00.000-07:00</strong></p>
<p>Example (UTC): <strong>2016/04/11T20:00:00.000Z</strong></p>
<p>Example (no milliseconds): <strong>2016/04/11T13:00:00-07:00</strong></p>
</blockquote>
<p><strong>Excel Compatible:</strong> Timestamp parsed in the timezone of the <strong>oauth
token</strong>'s associated network. Milliseconds are optional.</p>
<blockquote>
<p>Format: <strong>YYYY/MM/DD HH:MM:SS.sss AM/PM</strong></p>
<p>Example: <strong>2016/04/11 13:00:00.000 PM</strong></p>
<p>Example (no milliseconds): <strong>2016/04/11 13:00:00 PM</strong></p>
<p><strong>Note:</strong> The file upload user interface includes a timezone dropdown
feature, which allows users to select which timezone this format is
parsed in. Use the following to format Excel date cells: <strong>yyyy/mm/dd
hh:mm:ss.000 AM/PM</strong>.</p>
</blockquote>
<h2 id="example-post-request-using-curl"><a class="header" href="#example-post-request-using-curl">Example POST Request Using cURL</a></h2>
<p>You can send call results to Invoca servers in the form of an HTTP POST
or PUT. cURL is recommended because it is simple and preinstalled on
most machines. Below is an example of a cURL request:</p>
<pre><code>curl -k -H &quot;Content-Type: application/json&quot; -X POST -d '{&quot;search&quot;: {&quot;transaction_id&quot;: &quot;00000000-00000001&quot;},&quot;signals&quot;: [{&quot;name&quot;: &quot;sale&quot;,&quot;partner_unique_id&quot;: &quot;1&quot;,&quot;occurred_at_time&quot;: &quot;1440607313&quot;,&quot;revenue&quot;: &quot;100.00&quot;,&quot;value&quot;: &quot;true&quot;}], &quot;custom_data&quot;: [{&quot;name&quot;: &quot;channel&quot;, &quot;value&quot;: &quot;Paid Search&quot;}],&quot;oauth_token&quot;: &lt;YOUR OAUTH TOKEN&gt;}'  https://invoca.net/api/@@SIGNAL_API_VERSION/transactions.json
</code></pre>
<p>Below is the same example as above with the OAuth Token passed in via
the request headers:</p>
<pre><code>curl -k -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: &lt;YOUR OAUTH TOKEN&gt;&quot; -X POST -d '{&quot;search&quot;: {&quot;transaction_id&quot;: &quot;00000000-00000001&quot;},&quot;signals&quot;: [{&quot;name&quot;: &quot;sale&quot;,&quot;partner_unique_id&quot;: &quot;1&quot;,&quot;occurred_at_time&quot;: &quot;1440607313&quot;,&quot;revenue&quot;: &quot;100.00&quot;,&quot;value&quot;: &quot;true&quot;}], &quot;custom_data&quot;: [{&quot;name&quot;: &quot;channel&quot;, &quot;value&quot;: &quot;Paid Search&quot;}]}'  https://invoca.net/api/@@SIGNAL_API_VERSION/transactions.json
</code></pre>
<h2 id="errors-1"><a class="header" href="#errors-1">Errors</a></h2>
<p>The Signal API clearly identifies errors when a request cannot be
processed.</p>
<p><strong>Invalid Inputs</strong></p>
<p>If invalid parameters are passed, an error will be returned with a 403
response code.</p>
<p>For example, if a <strong>transaction_id</strong> or <strong>call_start_time</strong> are not
passed in the request, the following error will be returned.</p>
<p><strong>Response (403 Forbidden):</strong></p>
<pre><code>{
  &quot;errors&quot;: {
    &quot;class&quot;: &quot;InvalidInput&quot;,
    &quot;invalid_data&quot;: &quot;transaction_id, call_record_id, or call_start_time must not be empty&quot;
  }
}
</code></pre>
<p>If there are multiple issues with the request, we will do our best to
package all of the issues together in one response message.</p>
<p><strong>Example Bad Request</strong></p>
<pre><code>{
  &quot;search&quot;: {
    &quot;transaction_id&quot;: &quot;0000000-0000000A&quot;
  },
  &quot;signals&quot;: [
    {
      &quot;name&quot;: &quot;sale&quot;,
      &quot;custom_parameter_1&quot;: &quot;12345&quot;
    },
    {
      &quot;revenue&quot;: &quot;1,000&quot;,
      &quot;value&quot;: &quot;true&quot;
    },
    {
      &quot;name&quot;: &quot;sale&quot;,
      &quot;description&quot;: &quot;duplicate&quot;
    }
  ],
  &quot;custom_data&quot;: [
    {
      &quot;value&quot;: &quot;no_name&quot;
    },
    {
      &quot;name&quot;: &quot;no_value&quot;
    }
  ],
  &quot;oauth_token&quot;: &quot;&lt;YOUR OAUTH TOKEN&gt;&quot;
}
</code></pre>
<p><strong>Response (403 Forbidden):</strong></p>
<pre><code>{
  &quot;errors&quot;: {
    &quot;class&quot;: &quot;InvalidInput&quot;,
    &quot;invalid_data&quot;: &quot;The following params in 'signals' are not supported in this version: custom_parameter_1, description; signals[1] 'name' is required; 'name' for signals[0] and signals[2] must be unique; 'name' for custom_data[0] is required; 'value' for custom_data[1] is required&quot;
  }
}
</code></pre>
<hr />
<p><strong>Record Invalid Error</strong></p>
<p>In the case that we are not able to find all of the issues in the
request before processing, we will package up any errors that occur
during processing with the following error response:</p>
<p><strong>Response (403 Forbidden):</strong></p>
<pre><code>{
  &quot;errors&quot;: {
    &quot;class&quot;: &quot;RecordInvalid&quot;,
    &quot;invalid_data&quot;: &quot;Validation failed: Signals are limited to 100&quot;
  }
}
</code></pre>
<hr />
<p><strong>Record Not Found Error</strong></p>
<p>If no record is found for the search parameters that are passed in the
request, an error will be returned with a 404 response code. For
example, if a call cannot be found for the search parameters passed, the
following error will be returned.</p>
<p><strong>Response (404 Not Found):</strong></p>
<pre><code>{
  &quot;errors&quot;: {
    &quot;class&quot;: &quot;RecordNotFound&quot;,
    &quot;invalid_data&quot;: &quot;No call found. Please refer to the documentation.&quot;
  }
}
</code></pre>
<hr />
<p><strong>Permission Errors</strong></p>
<p>If you do not have access to the Signal API, the following error will be
returned with a 403 response code.</p>
<p><strong>Response (403 Forbidden):</strong></p>
<pre><code>{
  &quot;errors&quot;: {
    &quot;class&quot;: &quot;UnauthorizedOperation&quot;,
    &quot;invalid_data&quot;: &quot;You do not have permissions to perform the requested operation.&quot;
  }
}
</code></pre>
<hr />
<p><strong>Authorization Errors</strong></p>
<p>If you do not have access to the <strong>advertiser_id_from_network</strong>,
<strong>advertiser_campaign_id_from_network</strong>, or the <strong>network_id</strong> an
error will be returned with a 403 response code. For example, if you
pass an <strong>advertiser_id_from_network</strong> that you do not have access
to, the following error will be returned.</p>
<p><strong>Response (403 Forbidden):</strong></p>
<pre><code>{
  &quot;errors&quot;: {
    &quot;class&quot;: &quot;UnauthorizedAdvertiser&quot;,
    &quot;invalid_data&quot;: &quot;You do not have access to this advertiser&quot;
  }
}
</code></pre>
<h2 id="signal-transactions-rollup"><a class="header" href="#signal-transactions-rollup">Signal Transactions Rollup</a></h2>
<p><strong>Note</strong>: This specific section only applies if you have begun using the
Signal Transactions Rollup feature. This will only apply to calls that
occur <strong>after</strong> the date that this feature is enabled. If you are unsure
about whether you are using this feature, please contact the Invoca
Customer Successs team.</p>
<p>All Signals and Custom Data within a single request will be grouped
together based on the value of the field <strong>partner_unique_id</strong>. There
will be a single transaction for each group created. These new
transactions will have the transaction type <em>Post Call Event</em>.</p>
<p>A maximum of 10 transactions can be applied for a single request.
However, this limit does not apply to the number of Signals or Custom
Data included in a single grouping. See the <strong>Best Practices</strong> section
for understanding why this limit is enforced.</p>
<p>Request Parameter changes:</p>
<ul>
<li>The existing fields <strong>partner_unique_id</strong> and
<strong>occurred_at_time</strong> can now be specified at the top-level of a
request following the same formatting described above. This will be
applied to all signals and custom data in the request.</li>
<li>These fields can still be specified inline with each signal, but
signals with different values for <strong>partner_unique_id</strong> will be
not be grouped together.</li>
<li>If specified inline for a specific signal, it will take precedence
for that signal over the top-level value.</li>
<li>Custom Data fields will be grouped together into a Post Call Event
transaction using the top-level <strong>partner_unique_id</strong> (this may be
omitted and will default to the empty string).</li>
</ul>
<p>Using a single <strong>partner_unique_id</strong> at the top level, such that it
will be used for all Signals and Custom Data, is <strong>highly recommended</strong>.
This will minimize the number of transactions that show up in the
Transaction Detail reports and the Transactions API.</p>
<p>Response Parameter changes:</p>
<ul>
<li>The <strong>signals</strong> array will contain an entry for each Post Call Event
Transaction created.</li>
<li>Since Signals may be grouped, the name and value of each Post Call
Event Transaction will be a comma-separated list corresponding to
the signals grouped within.</li>
<li>Custom Data fields will not be displayed here, but will be applied
to the Post Call Event transaction corresponding the the top-level
<strong>partner_unique_id</strong></li>
</ul>
<p><strong>Example Request</strong></p>
<pre><code>{
  &quot;search&quot;: {
    &quot;transaction_id&quot;: &quot;00000000-00000001&quot;
  },
  &quot;partner_unique_id&quot;: &quot;1&quot;,
  &quot;occurred_at_time&quot;: &quot;2019-02-14T13:30:04Z&quot;,
  &quot;signals&quot;: [{
    &quot;name&quot;: &quot;Quote&quot;, &quot;revenue&quot;: &quot;100.0&quot;
  }, {
    &quot;name&quot;: &quot;Appointment Made&quot;, &quot;value&quot;: &quot;false&quot;
  }],
  &quot;custom_data&quot;: [{
    &quot;name&quot;: &quot;line_of_business&quot;,
    &quot;value&quot;: &quot;Great Deals&quot;
  }, {
    &quot;name&quot;: &quot;utm_source&quot;,
    &quot;value&quot;: &quot;google.com&quot;
  }],
  &quot;oauth_token&quot;: &quot;&lt;YOUR OAUTH TOKEN&gt;&quot;
}
</code></pre>
<p><strong>Example Response</strong></p>
<pre><code>{
  &quot;signals&quot;: [{
    &quot;transaction_id&quot;: &quot;00000000-0000000A&quot;,
    &quot;corrects_transaction_id&quot;: null,
    &quot;name&quot;: &quot;Quote,Appointment Made&quot;,
    &quot;partner_unique_id&quot;: &quot;1&quot;,
    &quot;occurred_at_time_t&quot;: &quot;1550179818&quot;,
    &quot;occurred_at_time&quot;: &quot;2019-02-14T13:30:04Z&quot;,
    &quot;revenue&quot;: &quot;100.0&quot;,
    &quot;value&quot;: &quot;true,false&quot;
  }],
  &quot;call&quot;: {
    &quot;transaction_id&quot;: &quot;00000000-00000001&quot;,
    &quot;corrects_transaction_id&quot;: null,
    &quot;start_time_t&quot;: &quot;1435993200&quot;,
    &quot;call_start_time&quot;: &quot;2015-07-04T07:00:00Z&quot;
  }
}
</code></pre>
<p><strong>Additional Errors</strong></p>
<p>We no longer support specifying <strong>revenue</strong> at the top level header of
the request. Revenue must be specified on each Signal.</p>
<pre><code>{
  &quot;errors&quot;: {
    &quot;class&quot;: &quot;RecordInvalid&quot;,
    &quot;invalid_data&quot;: &quot;Revenue must be specified on each Signal instead of at the top level header of the request&quot;
  }
}
</code></pre>
<h2 id="updates-and-idempotency"><a class="header" href="#updates-and-idempotency">Updates and Idempotency</a></h2>
<p><strong>Notice for users of the Signal Transactions Rollup feature:</strong></p>
<p>If you are using the Signal Transactions Rollup feature (see section
<em>Signal Transactions Rollup</em> above), some of the Updates and Idempotency
information below has changed slightly.</p>
<p>Signals and Custom Data are considered unique by <strong>partner_unique_id</strong>
only; name is <em>not</em> considered. Signals and Custom data are grouped into
transactions according to <strong>partner_unique_id</strong>. If a request supplies
the same <strong>partner_unique_id</strong> as a previous transaction, the previous
transaction will be updated with the content of the new request.</p>
<p>The information below regarding Updates and Idempotency still applies,
but with this distinction.</p>
<p><strong>Signals:</strong></p>
<p>Signals are considered unique by a combination of <strong>name</strong> and
<strong>partner_unique_id</strong>. For example, if you make two requests with the
same <strong>name</strong> and <strong>partner_unique_id</strong>, the other params in the
second request will update the original signal’s fields</p>
<p>Therefore, if you make two requests with the same params, the signal
will not be updated nor will a new one be made. It is safe then to
re-post API requests without fear of duplicate data.</p>
<p>If you change the <strong>partner_unique_id</strong>, a second signal of the same
name will be associated with the transaction.</p>
<hr />
<p>Example of creating two signals (on a single call) then updating one</p>
<p><strong>HTTP POST parameters</strong> - first request (creates both signals, which
are valid due to unique <strong>partner_unique_id</strong>):</p>
<pre><code>{
  &quot;search&quot;: {
    &quot;transaction_id&quot;: &quot;00000000-00000001&quot;
  },
  &quot;signals&quot;: [{
    &quot;name&quot;: &quot;Quote&quot;,
    &quot;partner_unique_id&quot;: &quot;1&quot;
  }, {
    &quot;name&quot;: &quot;Quote&quot;,
    &quot;partner_unique_id&quot;: &quot;2&quot;
  }],
  &quot;oauth_token&quot;: &quot;&lt;YOUR OAUTH TOKEN&gt;&quot;
}
</code></pre>
<p><strong>Response (200 OK):</strong></p>
<pre><code>{
  &quot;signals&quot;: [{
    &quot;transaction_id&quot;: &quot;00000000-0000000A&quot;,
    &quot;corrects_transaction_id&quot;: null,
    &quot;name&quot;: &quot;Quote&quot;,
    &quot;partner_unique_id&quot;: &quot;1&quot;,
    &quot;occurred_at_time_t&quot;: &quot;1440607999&quot;,
    &quot;occurred_at_time&quot;: &quot;2015-08-26T16:53:19Z&quot;,
    &quot;value&quot;: &quot;true&quot;
  }, {
    &quot;transaction_id&quot;: &quot;00000000-0000000B&quot;,
    &quot;corrects_transaction_id&quot;: null,
    &quot;name&quot;: &quot;Quote&quot;,
    &quot;partner_unique_id&quot;: &quot;2&quot;,
    &quot;occurred_at_time_t&quot;: &quot;1440608000&quot;,
    &quot;occurred_at_time&quot;: &quot;2015-08-26T16:53:20Z&quot;,
    &quot;value&quot;: &quot;true&quot;
  }],
  &quot;call&quot;: {
    &quot;transaction_id&quot;: &quot;00000000-00000001&quot;,
    &quot;corrects_transaction_id&quot;: null,
    &quot;start_time_t&quot;: &quot;1435993200&quot;,
    &quot;call_start_time&quot;: &quot;2015-07-04T07:00:00Z&quot;
  }
}
</code></pre>
<p><strong>HTTP POST Parameters</strong> - second request (updates first request):</p>
<pre><code>{
  &quot;search&quot;: {
    &quot;transaction_id&quot;: &quot;00000000-00000001&quot;
  },
  &quot;signals&quot;: [{
    &quot;name&quot;: &quot;Quote&quot;,
    &quot;partner_unique_id&quot;: &quot;1&quot;
  }],
  &quot;oauth_token&quot;: &quot;&lt;YOUR OAUTH TOKEN&gt;&quot;
}
</code></pre>
<p><strong>Response (200 OK):</strong></p>
<pre><code>{
  &quot;signals&quot;: [{
    &quot;transaction_id&quot;: &quot;00000000-0000000C&quot;,
    &quot;corrects_transaction_id&quot;: &quot;00000000-0000000A&quot;,
    &quot;name&quot;: &quot;Quote&quot;,
    &quot;partner_unique_id&quot;: &quot;1&quot;,
    &quot;occurred_at_time_t&quot;: &quot;1440607999&quot;,
    &quot;occurred_at_time&quot;: &quot;2015-08-26T16:53:19Z&quot;,
    &quot;value&quot;: &quot;true&quot;
  }],
  &quot;call&quot;: {
    &quot;transaction_id&quot;: &quot;00000000-00000001&quot;,
    &quot;corrects_transaction_id&quot;: null,
    &quot;start_time_t&quot;: &quot;1435993200&quot;,
    &quot;call_start_time&quot;: &quot;2015-07-04T07:00:00Z&quot;
  }
}
</code></pre>
<p>Note: even though this second request was an update to the first and
will appear in reports as updating the first signal, a new signal
transaction ID is returned. This is because a correction has been made
to the first signal, and this new transaction ID is what will appear in
webhooks and the Transactions API.</p>
<hr />
<p><strong>Custom Data:</strong></p>
<p>Custom Data fields are considered unique by their <strong>name</strong> only.</p>
<p>Each request made will apply a correction to the target call and
override any existing Custom Data Field values for the provided fields.</p>
<p>Therefore, subsequent requests will create corrections and appear as
though the original call was updated.</p>
<p>Note: Any signals provided or associated previously with the call with
also reflect these new Custom Data values.</p>
<h2 id="best-practices"><a class="header" href="#best-practices">Best Practices</a></h2>
<p><strong>Applying Many Signals to a Single Call:</strong> Batching your Signal
applications into a single request is the most performant way to apply
many signals. You may not include more than 10 signals in a single
request. If you need to apply <em>more</em> than 10, batch your requests into
as few groups of 10 as possible.</p>
<p>Note: As signals are applied to the call, the response time of the API
will increase with each signal added. In extreme cases, this can cause
the request time to exceed the 120 seconds API timeout resulting in an
504 Gateway Timeout HTTP response.</p>
<pre><code># FAST: Apply multiple signals in a single request
curl -k -H &quot;Content-Type: application/json&quot; -X POST -d '{&quot;search&quot;: {&quot;transaction_id&quot;: &quot;00000000-00000001&quot;},&quot;signals&quot;: [{&quot;name&quot;: &quot;sale&quot;,&quot;partner_unique_id&quot;: &quot;1&quot;,&quot;occurred_at_time&quot;: &quot;1440607313&quot;,&quot;revenue&quot;: &quot;100.00&quot;,&quot;value&quot;: &quot;true&quot;},{&quot;name&quot;: &quot;Quality Call&quot;,&quot;value&quot;: &quot;true&quot;},{&quot;name&quot;: &quot;Appointment Made&quot;,&quot;partner_unique_id&quot;: &quot;1&quot;,&quot;occurred_at_time&quot;: &quot;1440607313&quot;,&quot;value&quot;: &quot;false&quot;}], &quot;custom_data&quot;: [{&quot;name&quot;: &quot;channel&quot;, &quot;value&quot;: &quot;Paid Search&quot;}],&quot;oauth_token&quot;: &lt;YOUR OAUTH TOKEN&gt;}'  https://invoca.net/api/@@SIGNAL_API_VERSION/transactions.json

# SLOW: Attempt to apply multiple signals in multiple requests
curl -k -H &quot;Content-Type: application/json&quot; -X POST -d '{&quot;search&quot;: {&quot;transaction_id&quot;: &quot;00000000-00000001&quot;},&quot;signals&quot;: [{&quot;name&quot;: &quot;sale&quot;,&quot;partner_unique_id&quot;: &quot;1&quot;,&quot;occurred_at_time&quot;: &quot;1440607313&quot;,&quot;revenue&quot;: &quot;100.00&quot;,&quot;value&quot;: &quot;true&quot;}], &quot;custom_data&quot;: [{&quot;name&quot;: &quot;channel&quot;, &quot;value&quot;: &quot;Paid Search&quot;}],&quot;oauth_token&quot;: &lt;YOUR OAUTH TOKEN&gt;}'  https://invoca.net/api/@@SIGNAL_API_VERSION/transactions.json
curl -k -H &quot;Content-Type: application/json&quot; -X POST -d '{&quot;search&quot;: {&quot;transaction_id&quot;: &quot;00000000-00000001&quot;},&quot;signals&quot;: [{&quot;name&quot;: &quot;Quality Call&quot;,&quot;value&quot;: &quot;true&quot;}], &quot;custom_data&quot;: [{&quot;name&quot;: &quot;channel&quot;, &quot;value&quot;: &quot;Paid Search&quot;}],&quot;oauth_token&quot;: &lt;YOUR OAUTH TOKEN&gt;}'  https://invoca.net/api/@@SIGNAL_API_VERSION/transactions.json
curl -k -H &quot;Content-Type: application/json&quot; -X POST -d '{&quot;search&quot;: {&quot;transaction_id&quot;: &quot;00000000-00000001&quot;},&quot;signals&quot;: [{&quot;name&quot;: &quot;Appointment Made&quot;,&quot;partner_unique_id&quot;: &quot;1&quot;,&quot;occurred_at_time&quot;: &quot;1440607313&quot;,&quot;value&quot;: &quot;false&quot;}], &quot;custom_data&quot;: [{&quot;name&quot;: &quot;channel&quot;, &quot;value&quot;: &quot;Paid Search&quot;}],&quot;oauth_token&quot;: &lt;YOUR OAUTH TOKEN&gt;}'  https://invoca.net/api/@@SIGNAL_API_VERSION/transactions.json
</code></pre>
<h2 id="migration-notes"><a class="header" href="#migration-notes">Migration Notes</a></h2>
<p><strong>Note</strong>: If using the Signal Transactions Rollup feature (see section
<em>Signal Transactions Rollup</em> above), this section can be ignored.</p>
<p>For upgrading from version <code>2017-02-01</code></p>
<ul>
<li>URL path was changed</li>
<li>Added <strong>custom_data</strong> key, an array of objects for setting custom
data values</li>
<li><strong>signal</strong> key was changed to <strong>signals</strong>, which is now an array of
the same objects with the following changes
<ul>
<li>Removed support for <strong>custom_parameter_1</strong>,
<strong>custom_parameter_2</strong>, <strong>custom_parameter_3</strong> (use new
<strong>custom_data</strong> outer key instead)</li>
<li>Removed support for <strong>sale_amount</strong> (use <strong>revenue</strong> instead)</li>
<li>Removed support for <strong>description</strong> (recommended to use Custom
Data Fields instead)</li>
</ul>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="manage-api-credentials"><a class="header" href="#manage-api-credentials">Manage API Credentials</a></h1>
<p>Invoca's self-serve API token access is OAuth-compliant. Accessing APIs
using the API token enables customers to access and in some cases modify
information through a third-party app or APIs without the risk of
compromising security. It also ensures that secure, sensitive
customer-related information is not exposed to the third-party app.</p>
<p>Currently, users can generate API credentials for the
<code>Transactions API &lt;transactions_api/index&gt;</code> and
<code>Network Integration API &lt;network_integration/index&gt;</code> (the Network
Integration API is available to Network users only).</p>
<h2 id="create-an-api-token"><a class="header" href="#create-an-api-token">Create an API Token</a></h2>
<p>To create an API token:</p>
<ol>
<li>
<p>From the Navigation Bar, hover on Integrations and select &quot;Invoca
APIs&quot;</p>
<p><img src="api_documentation/../_static/manage_api_credentials.png" alt="image" /></p>
</li>
<li>
<p>On the &quot;Invoca API Credentials&quot; page, click &quot;New API Credential&quot;</p>
</li>
<li>
<p>Enter Description and click Save.</p>
</li>
</ol>
<p>Note: It is recommended to provide a description that identifies the API
type and use.</p>
<h2 id="delete-an-api-token"><a class="header" href="#delete-an-api-token">Delete an API Token</a></h2>
<p>To delete or remove an API token from your platform:</p>
<ol>
<li>
<p>From the Navigation Bar, hover on Integrations and select &quot;Invoca
APIs&quot;</p>
<p><img src="api_documentation/../_static/manage_api_credentials.png" alt="image" /></p>
</li>
<li>
<p>On the &quot;Invoca API Credentials&quot; page, click the delete icon
associated to the API token to delete.</p>
</li>
</ol>
<h2 id="api-guidelines"><a class="header" href="#api-guidelines">API Guidelines</a></h2>
<ul>
<li>Users should generate their own API tokens. Tokens should be treated
like passwords and not be emailed or transmitted over other insecure
mediums, nor should they be stored in a customer's source code
repository.</li>
<li>As a network user, you should not generate a token on behalf of
Advertisers or Publishers as tokens inherit the privileges of the
user generating it.</li>
<li>Invoca does not use OAuth refresh tokens.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="web-integration-1"><a class="header" href="#web-integration-1">Web Integration</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="api-documentation-2"><a class="header" href="#api-documentation-2">API Documentation</a></h1>
<p>The platform provides a number of APIs:</p>
<p><a href="api_documentation/./transactions_api/index.html">Transactions API</a> - provides read-only access to call transaction data. There are three kinds of users:</p>
<ul>
<li>
<p><a href="api_documentation/./transactions_api/network_user.html">Network User</a></p>
</li>
<li>
<p><a href="api_documentation/./transactions_api/adveriser_user.html">Advertiser User</a></p>
</li>
<li>
<p><a href="api_documentation/./transactions_api/affiliate_user.html">Affiliate User</a></p>
</li>
</ul>
<p><a href="api_documentation/./network_integration/index.html">Network Integration API</a> - supports
the replication and synchronization of advertiser, publisher and
campaign data between partner platforms.</p>
<p><a href="api_documentation/./conversion_reporting/index.html">Converstion Reporting</a> -provides the
ability to report completed order information (or other conversion
events) from a server back into the platform.</p>
<p><a href="api_documentation/./bulk_ringpool_api.html">Bulk Ringpool API</a> -allocates a dynamic,
trackable promo phone number from a RingPool (designed to handle a
high volume of requests per second).</p>
<h1>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
<a href="api_documentation/./signal_api/index.html">Signal API</a> -used to report signals that occur
on a specific call. Rainbows!  (transaction).</h1>
<p><a href="api_documentation/./signal_api/index.html">Signal API</a> -used to report signals that occur on a specific call.
(transaction).
&gt;&gt;&gt;&gt;&gt;&gt;&gt; 1166bffb1ede806c9e030fc6de9a92ef3ee68d52</p>
<p><code>call_api/index</code> -used to pull transcript information for a specific
call (transcript).</p>
<p><code>call_ingestion_api/index</code> -used to ingest calls from external sources
for conversation intelligence processing and inclusion in your reports
and dashboards.</p>
<p><code>calls_in_progress_api/index</code> -used to query/update calls that are
currently in progress within the Invoca platform</p>
<p>The Transactions API and Network Integration API are accessible using
the API credentials generated on the platform. See
<code>manage_api_credentials</code> for more information.</p>
<p>The Conversion Reporting API is accessible using credentials provided by
Invoca. Contact <a href="mailto:api_documentation/questions@invoca.com">questions@invoca.com</a> to request Conversion Reporting
API credentials.</p>
<p>The RingPool and Bulk RingPool APIs are accessible using the API keys
provided in the RingPool wizard. (Note: the Bulk RingPool API is only
available after being enabled by Customer Success. Contact
<a href="mailto:api_documentation/questions@invoca.com">questions@invoca.com</a> to request the Bulk RingPool API.)</p>
<p>The RingPool wizard includes a section showing the correct API URL for
your organization:</p>
<img src="https://lh6.googleusercontent.com/bPAQy29TdQ_Pljxyv5gh520cLnWHWNWUXyU8_GrN52yLNOdkKlWZPzFLCOKgdE-IejM3XDdJGZyJtQ8EMprqwUSImYfuffWuXMGQAYAFzEbMOxt7Ggtp59Q96AOf6a3BeQ"  class="info-img" width="544px;" height="191px;" style="border-style: none;" alt="RP_API.png" />
<p>manage_api_credentials network_integration/index
transactions_api/index bulk_ringpool_api ringpool signal_api/index
call_api/index call_ingestion_api/index
calls_in_progress_api/index conversion_reporting</p>
<div style="break-before: page; page-break-before: always;"></div><p>Conversion Reporting (Deprecated) ====================</p>
<div style="margin-bottom: 20px; padding: 15px; background-color: #fff3cd; color: #333;"><p>
  <b>Notice:</b>
  <a href="https://developers.invoca.net/en/latest/api_documentation/signal_api/index.html">Signal API</a> is now the supported way for reporting that a sale or other post call event occurred on calls.
  The Conversion Reporting API is deprecated and no longer available for new accounts.</p>
</div>
<p>The Conversion Reporting API (formerly referred to as the “Call Center”
or “Sales Reporting” API) is used to report completed order information
(or other conversion events) from a server back into the platform.
Reporting order information through the API allows advertisers to
compensate publishers for sales that convert over the phone (or on the
web). Additionally, Advertiser Direct campaigns using the Conversion
Reporting API with search campaigns can report back revenue generated
for each phone call so that search bids can be optimized.</p>
<p>For existing customers looking for deprecated documentation on the
conversion pixel and email approach to reporting conversions, see these
pages:</p>
<p><code>conversion_reporting_email</code></p>
<p><code>conversion_reporting_pixel</code></p>
<h1 id="authentication-1"><a class="header" href="#authentication-1">Authentication</a></h1>
<p>The Conversion Reporting API requires specific credentials and a
conversion reporting ID for the URL. Note: creating new credentials is
no longer supported. Please use the <code>signal_api/index</code> instead.</p>
<h1 id="client-api-wrappers"><a class="header" href="#client-api-wrappers">Client API Wrappers</a></h1>
<p>The following working examples with wrapper code to integrate in Ruby,
Java, PHP or .NET are available:</p>
<blockquote>
<p><a href="https://github.com/Invoca/call_center_api-ruby">Ruby</a></p>
<p><a href="https://github.com/Invoca/call_center_api-java">Java</a></p>
<p><a href="https://github.com/Invoca/call_center_api-php">PHP</a></p>
<p><a href="https://github.com/Invoca/call_center_api-dotnet">.NET</a></p>
</blockquote>
<h1 id="post-or-put-to-a-url"><a class="header" href="#post-or-put-to-a-url">POST (or PUT) to a URL</a></h1>
<p>Send call results to Invoca servers in the form of an HTTP POST. cURL is
recommended because it is simple and preinstalled on most machines. The
extended example later in this document breaks down each part of a cURL
POST.</p>
<p>Here is an example of a URL POST:</p>
<p><code>https://api0.invoca.net/api/@@CONVERSION_API_VERSION/calls/23.xml</code></p>
<p>where “&quot; is the API version and &quot;23&quot; is the Conversion Reporting ID
(previously known as Call Center ID) for your account on the platform.</p>
<p>For “Publisher Promotion” or Fixed Price “Bundled” campaigns, the
Conversion Reporting ID is found on the Campaign Summary tab,
Integration section.</p>
<p>Remember to check the HTTP status code returned for error checking. This
helps greatly when debugging.</p>
<h1 id="parameters"><a class="header" href="#parameters">Parameters</a></h1>
<p>Passed in standard HTML “application/form-url-encoded” format. Put
quotes around all parameter values being passed in the API call.</p>
<h1 id="report-a-saleconversion-on-a-call"><a class="header" href="#report-a-saleconversion-on-a-call">Report a sale/conversion on a call</a></h1>
<blockquote>
<p>Required</p>
<p><span class="title-ref">start_time_t:</span> 10 digit start time of
the call in UTC seconds since 1/1/70, also known as Unix time_t. The
start time does not have to be exact since clocks will not be
perfectly synchronized.</p>
<p>Additionally, one of the following two parameters is highly
recommended:</p>
<blockquote>
<p><span class="title-ref">calling_phone_number:</span> ANI in E.164
format +country national_number; example: ‘+18885551212’.</p>
<p><span class="title-ref">duration_in_seconds:</span> Length of the
call. Used for finding the call that drove the sale, not used to
check against payout conditions. Like start time,
duration_in_seconds does not have to be exact, we use it find the
closest match.</p>
</blockquote>
<p>Optional</p>
<p><span class="title-ref">reference_id:</span>
(call_center_call_id): This ID must be unique for each call across
a call center’s calls. The ID is set the first time the call result is
POSTed for a call. To update the call result, use the same ID.</p>
<p><span class="title-ref">called_phone_number:</span> DNIS in E.164
format +country national_number; example: ‘+18885551212’. UK and
Spanish numbers are also supported. Their country codes are +44 and
+34 respectively.</p>
<p><span class="title-ref">use_http_status:</span> 1 or blank will use
HTTP status corresponding to success/failure. If set to 0, the HTTP
status will always be 200 OK and the actual status and error message
will be in the response body. See the Status section below.</p>
</blockquote>
<h1 id="report-a-new-web-conversion"><a class="header" href="#report-a-new-web-conversion">Report a new web conversion</a></h1>
<blockquote>
<p>Required</p>
<p><span class="title-ref">web_conversion:</span> Set to “1” to indicate
a conversion that is not tied to a call (default is 0).</p>
<p><span class="title-ref">reference_id:</span> This ID must be unique
for each conversion.</p>
<p><span class="title-ref">advertiser_campaign_id:</span> The ID of the
advertiser campaign in the platform.</p>
<p><span class="title-ref">affiliate_id_from_network:</span> The
affiliate or publisher ID (of the main network) that is credited for
the web conversion; the publisher must be approved to the advertiser
campaign specified above.</p>
<p>Optional</p>
<p><span class="title-ref">use_http_status:</span> 1 or blank will use
HTTP status corresponding to success/failure. If set to 0, the HTTP
status will always be 200 OK and the actual status and error message
will be in the response body. See the Status section below.</p>
</blockquote>
<h1 id="add-to-an-existing-web-conversion"><a class="header" href="#add-to-an-existing-web-conversion">Add to an existing web conversion</a></h1>
<blockquote>
<p>Required</p>
<p><span class="title-ref">web_conversion:</span> Set to “1” to indicate
a conversion that is not tied to a call (default is 0).</p>
<p><span class="title-ref">parent_reference_id:</span> This is the
reference_id that was passed in when creating the initial web
conversion.</p>
<p>Optional</p>
<p><span class="title-ref">use_http_status:</span> 1 or blank will use
HTTP status corresponding to success/failure. If set to 0, the HTTP
status will always be 200 OK and the actual status and error message
will be in the response body. See the Status section below.</p>
</blockquote>
<h1 id="shared-parameters-for-sales-and-web-conversions"><a class="header" href="#shared-parameters-for-sales-and-web-conversions">Shared parameters for sales and web conversions</a></h1>
<blockquote>
<p>Optional (for Tracking Sales)</p>
<p><span class="title-ref">reason_code:</span> the conversion event
specified in the payout conditions in the campaign. This code is free
form and left to the advertiser to decide.</p>
<p>(For example, ‘R’ for Referred to customer service, or ‘info’ for
requesting information. Or simply “Y” for a lead was generated and “N”
if not.)</p>
<p><span class="title-ref">sku_list[]:</span> Product SKU (repeat this
parameter for multiple products). Like the reason_code, the sku_list
is a free form description of the product or service sold and can be
used as a payout condition.</p>
<p>Note: when reporting via email, the CSV header name should be
“sku_list” and a single comma separated list should be provided.</p>
<p><span class="title-ref">quantity_list[]:</span> Quantity 1 or
greater for the corresponding product SKU listed in the sku_list
(Quantities must appear in same order as the SKUs listed in the
sku_list.)</p>
<p>Note: when reporting via email, the CSV header name should be
“quantity_list” and a single comma separated list should be provided.</p>
<p><span class="title-ref">sale_currency:</span> USD, GBP, EUR, etc.</p>
<p><span class="title-ref">sale_amount:</span> Amount to 2 decimal
places, or 0.00 if no sale (does not include shipping).</p>
<p>Optional (for Remarketing)</p>
<p><span class="title-ref">email_address:</span> email address in
RFC2822 format or empty string</p>
<p><span class="title-ref">name:</span> first last name</p>
<p><span class="title-ref">address1:</span> Address line 1.</p>
<p><span class="title-ref">address2:</span> Address line 2.</p>
<p><span class="title-ref">order_city:</span> City</p>
<p><span class="title-ref">state_or_province:</span> State of Province</p>
<p><span class="title-ref">country:</span> Country</p>
<p><span class="title-ref">zip_code:</span> Postal Code</p>
<p><span class="title-ref">home_phone_number:</span> Home phone in case
there are any questions, in E.164 format.</p>
<p><span class="title-ref">cell_phone_number:</span> Cell phone in case
there are any questions, in E.164 format.</p>
<p><span class="title-ref">opt_in_SMS:</span> 1 if authorized to send
SMS reply or 0 or empty if not.</p>
</blockquote>
<h1 id="status"><a class="header" href="#status">Status</a></h1>
<p>The HTTP status returned is 201 Created for a successful POST (or a 200
OK for a successful PUT), a 4xx code if one of the parameters is
incorrect, or a 5xx code if a server error occurred. In the latter two
error cases, a detailed error class and message are returned in XML in
the body, for example:</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Error&gt;
    &lt;Class&gt;NotFound&lt;/Class&gt;
    &lt;Message&gt;Couldn't find call around time 1262895406 from caller +1 8053825533
     &lt;/Message&gt;
&lt;/Error&gt;
</code></pre>
<p>If &amp;use_http_status=0 is given, the status is always returned as 200
Ok or 201 Created. This can be helpful in order to see the detailed
error message in the body when working with HTTP libraries that just
return the status code when there are errors without exposing the body.</p>
<h1 id="security-1"><a class="header" href="#security-1">Security</a></h1>
<p>All posts must use HTTPS BASIC authentication and use pre-assigned
usernames and passwords. Contact <a href="mailto:api_documentation/questions@invoca">questions@invoca</a> to request
Conversion Reporting API credentials.</p>
<h1 id="high-availability"><a class="header" href="#high-availability">High availability</a></h1>
<p>The initial POST should choose randomly (or alternately) between
api0.invoca.net and api1.invoca.net. If a POST fails for any reason,
retry the POST on the other one.</p>
<h1 id="idempotency-1"><a class="header" href="#idempotency-1">Idempotency</a></h1>
<p>Sales are considered unique using a combination of start_time_t +
SKU_list + reason code. POSTs with duplicate keys (same call, sku list,
reason code) behave as follows:</p>
<ol>
<li>If the values passed are unchanged, the reported conversion remains
unchanged and is not duplicated.</li>
<li>If different values are passed, the original conversion is updated
with the new values.</li>
</ol>
<p>POSTs with unique keys always create new conversion transactions.</p>
<h1 id="frequency"><a class="header" href="#frequency">Frequency</a></h1>
<p>Updates can be sent at any frequency from once a minute to once a day.
Customers prefer to get their data as fast as possible, so the best
practice is to get as close to once a minute as practical.</p>
<h1 id="example"><a class="header" href="#example">Example</a></h1>
<p>The example below uses cURL to demonstrate a POST that updates a call.</p>
<pre><code>curl -u 'example@callcenter.api:secretPW'` \
'https://api0.invoca.net/api/@@CONVERSION_API_VERSION/calls/23.xml' -k -v \` \
-d reference_id='2935812450'             \
-d start_time_t='1273589993'             \
-d duration_in_seconds=300               \
-d called_phone_number='+18773593504'    \
-d calling_phone_number='+12143283408'   \
-d reason_code='S'                       \
-d sku_list[]='DVD'                      \
-d quantity_list[]=2                     \
-d sku_list[]='cleaner'                  \
-d quantity_list[]=1                     \
-d sale_currency='USD'                   \
-d sale_amount='60.50'                   \
-d email_address='jane@doe.com'          \
-d opt_in_SMS='1'                        \
-d name='Jane Doe'                       \
-d address1='123 Mockingbird Lane'       \
-d address2='Unit 2'                     \
-d order_city='Chicago'                  \
-d state_or_province='IL'                \
-d country='US'                          \
-d cell_phone_number='+13125170488'      \
-d use_http_status='1'&lt;/code&gt;&lt;/pre&gt;
</code></pre>
<p>Output:</p>
<pre><code>HTTP/1.1 201 Created
Date: Fri, 25 Jun 2010 18:22:45 GMT
Server: Mongrel 1.1.5
Status: 201
X-Runtime: 189
Cache-Control: no-cache
Content-Type: application/xml; charset=utf-8
Content-Length: 1
Set-Cookie: SERVERID=; Expires=Thu, 01-Jan-1970 00:00:01 GMT; path=/
Via: 1.1 www.invoca.net
Vary: Accept-Encoding
</code></pre>
<h1 id="example-breakdown"><a class="header" href="#example-breakdown">Example Breakdown</a></h1>
<p>This is a description of some of the parameters in the previous cURL
example.</p>
<blockquote>
<p><span class="title-ref">curl -u
'example@callcenter.api:secretPW'</span> If using cURL, this is how
credentials are passed. The username is 'example@callcenter.api' and
the password is ‘secretPW’. The two strings need to be separated with
a colon character.</p>
<p><span
class="title-ref">'https://api0.invoca.net/api/@@CONVERSION_API_VERSION/calls/23.xml'
-k -v</span> The URL where the call result is sent. The API version is
“@@CONVERSION_API_VERSION” and the unique Conversion Reporting ID is
“23”.</p>
<p><span class="title-ref">-d reference_id='2935812450'</span> This ID
(if provided) needs to be unique for each call within a call center,
and is the handle for future updates on this call or conversion.</p>
<p><span class="title-ref">-d start_time_t='1273589993'</span> The call
start time in UTC.</p>
<p><span class="title-ref">-d called_phone_number='+18773593504'</span>
The phone number the caller dialed.</p>
<p><span class="title-ref">-d
calling_phone_number='+12143283408'</span> The phone number the
caller is calling from.</p>
<p><span class="title-ref">-d sku_list[]='DVD'</span></p>
<p><span class="title-ref">-d quantity_list[]=2</span></p>
<p><span class="title-ref">-d sku_list[]='cleaner'</span></p>
<p><span class="title-ref">-d quantity_list[]=1</span> sku_list and
quantity_list are closely related. The quantity_list must appear in
the same order as the sku_list. For this example, the sku DVD has a
quantity value of 2 while cleaner is 1.</p>
</blockquote>
<h1 id="search-algorithm-to-find-matching-call"><a class="header" href="#search-algorithm-to-find-matching-call">Search Algorithm to Find Matching Call</a></h1>
<p>We look for an exact match for calls associated with the call center,
using these parameters, if given:</p>
<p><span class="title-ref">reference_id</span> <span
class="title-ref">calling_phone_number</span></p>
<p>If more than one call is found with those exact parameters (or the
parameters are not provided), we then look for calls that are closest to
the start_time_t and duration_in_seconds, if provided. Due to the
distribution of call attribute data, the start_time_t parameter is
given a different weight than duration_in_seconds so that a call with
a start time difference of 20 seconds is equivalent to a call with a
duration difference of 1 second.</p>
<p>Please note that the Conversion Reporting API is idempotent (if you
repost sales data already captured, it is not accidentally counted
twice), so repost any sales that receive a failure.</p>
<h2 id="endpoint"><a class="header" href="#endpoint">Endpoint:</a></h2>
<p><code>https://invoca.net/api/@@CONVERSION_API_VERSION/calls/&lt;converstion_reporting_id&gt;.xml</code></p>
<div style="break-before: page; page-break-before: always;"></div><p>Ringpool API (Legacy) ========</p>
<p>The RingPool API allocates a dynamic, trackable promo phone number from
a RingPool. A valid call to the RingPool API returns a promo number and
a formatted click-through URL.</p>
<p>Example API URL:</p>
<p><code>https://&lt;NETWORK&gt;.invoca.net/api/@@RINGPOOL_API_VERSION/ring_pools/16/allocate_number.xml?ring_pool_key=&lt;KEY&gt;&amp;site=&lt;VALUE1&gt;&amp;location=&lt;VALUE2&gt;</code></p>
<p>&lt;NETWORK&gt;.invoca.net is the vanity URL for your platform. Note
that your platform may exist on invoca.net or ringrevenue.com, and both
are supported.</p>
<p>&lt;RingPool_ID&gt; is a unique identifier for the RingPool.</p>
<p>&lt;KEY&gt; is the RingPool key, which is provided through the RingPool
wizard UI on the platform and should be kept a secret. The parameters
are explained in detail below in the “API Parameters” section.</p>
<p>The parameter names should match those chosen in the RingPool wizard, or
you can use generic parameter names “param1”, “param2”, etc. Here is the
same API URL with the generic parameter names:</p>
<p><code>https://&lt;NETWORK&gt;.invoca.net/api/@@RINGPOOL_API_VERSION/ring_pools/16/allocate_number.xml?ring_pool_key=&lt;KEY&gt;&amp;param1=&lt;VALUE1&gt;&amp;param2=&lt;VALUE2&gt;</code></p>
<p><strong>Note:</strong> To access the campaign RingPool’s API URL navigate to the
Campaign Summary’s RingPool tab and click “get api url” under Actions.</p>
<p><img src="api_documentation/../_static/ringpool_actions.png" alt="image" /></p>
<br />
<p><img src="api_documentation/../_static/ringpool_get_api_url.png" alt="image" /></p>
<h1 id="response-formats"><a class="header" href="#response-formats">Response Formats</a></h1>
<p>The response can be in any of these formats: <strong>xml</strong>, <strong>json</strong> or
<strong>csv</strong>. To choose the format, change the “.xml” shown in the URL to
“.json” or “.csv”. Below are example responses for each format:</p>
<p><strong>xml</strong></p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Response&gt;
  &lt;PromoNumberFormatted&gt;888-390-6665&lt;/PromoNumberFormatted&gt;
  &lt;PromoNumber&gt;8883906665&lt;/PromoNumber&gt;
  &lt;TrackingUrl&gt; https://invoca.net/c/1/14-11-109?us=http%3A%2F%2Fwww2.invoca.net%2Fdemo%2F8x8_staging.html%3Fsid%3D8883906665%26PPCPN%3D8883906665&lt;/TrackingUrl&gt;
&lt;/Response&gt;
</code></pre>
<p><strong>json</strong></p>
<pre><code>{&quot;promo_number_formatted&quot;:&quot;888-390-6665&quot;,&quot;tracking_url&quot;:&quot; https://invoca.net/c/1/14-11-109?us=http%3A%2F%2Fwww2.invoca.net.com%2Fdemo%2F8x8_staging.html%3Fsid%3D8883906665%26PPCPN%3D8883906665&quot;,&quot;promo_number&quot;:&quot;8883906665&quot;}
</code></pre>
<p><strong>csv</strong></p>
<pre><code>PromoNumberFormatted,PromoNumber,TrackingUrl
888-390-6665,8883906665, https://invoca.net/c/1/14-11-109?us=http%3A%2F%2Fwww2.invoca.net%2Fdemo%2F8x8_staging.html%3Fsid%3D8883906665%26PPCPN%3D8883906665
</code></pre>
<p>As an advertiser, you can allocate promo numbers from your RingPool on
behalf of your affiliates in order to credit them for calls. Just
include an affiliate id in the query string of the API URL. Note that
the parameter name depends on your network and the value must match what
is set on the affiliate account. Here is an example URL for tracking
affiliate 5567 on a network that calls the affiliate id a pid:</p>
<p><code>https://&lt;NETWORK&gt;.invoca.net/api/@@NETWORK_API_VERSION/ring_pools/16/allocate_number.xml?ring_pool_key=&lt;KEY&gt;&amp;pid=5567&amp;sid=adwords</code></p>
<h1 id="errors-2"><a class="header" href="#errors-2">Errors</a></h1>
<p>The RingPool API clearly identifies errors when a request can not be
processed. If the number pool is exhausted, the API still succeeds
because an overflow number is returned. If a parameter is not passed
correctly, an XML error response is returned as shown below:</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Error&gt;
  &lt;Class&gt;InvalidKey&lt;/Class&gt;
  &lt;Message&gt;API Key 'A329F4DC002168' is not valid for resource '1'&lt;/Message&gt;
&lt;/Error&gt;
</code></pre>
<p>Or for json or csv, the following text is returned:</p>
<p><span class="title-ref">InvalidKey: API Key 'A329F4DC002168' is not
valid for resource '1'</span></p>
<p>If a system error occurs, an InternalServiceError is returned in XML (or
simple text for json or csv) with an integer error handle. Contact
<a href="mailto:api_documentation/questions@invoca.com">questions@invoca.com</a> to determine the root cause of the error.</p>
<h1 id="ringpool-types"><a class="header" href="#ringpool-types">RingPool Types</a></h1>
<p>All 6 RingPool types are supported by the API:</p>
<p>Custom</p>
<p>Custom + Search keywords</p>
<p>Search Engine + Keywords</p>
<p>Search Engine + Keyword ID</p>
<p>Referral Domains</p>
<p>Referral Domains + search</p>
<h2 id="api-parameters"><a class="header" href="#api-parameters">API Parameters</a></h2>
<p>The API supports the following parameters:</p>
<table>
<colgroup>
<col style="width: 21%" />
<col style="width: 78%" />
</colgroup>
<thead>
<tr class="header">
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>ring_pool_key=</td>
<td>The required authentication key unique for each RingPool.</td>
</tr>
<tr class="even">
<td>param1=</td>
<td>[Custom RingPools only] The first custom parameter of a Custom RingPool. This parameter can also be represented by the custom name.</td>
</tr>
<tr class="odd">
<td>param2=</td>
<td>[Custom RingPools only] The second custom parameter of a Custom RingPool.</td>
</tr>
<tr class="even">
<td>…</td>
<td></td>
</tr>
<tr class="odd">
<td>param10=</td>
<td>[Custom RingPools only] The 10th custom parameter of a Custom RingPool.</td>
</tr>
<tr class="even">
<td>search_engine=</td>
<td>[All Search RingPool types] The search engine name used to process the search query.</td>
</tr>
<tr class="odd">
<td>search_keywords=</td>
<td>[All Search RingPool types] The search query that the user searched for.</td>
</tr>
<tr class="even">
<td>search_keyword_id=</td>
<td>[Keyword ID Search RingPool only] The keyword ID that is associated to the query string.</td>
</tr>
<tr class="odd">
<td>landing_page=</td>
<td>[Optional] The landing page URL to be shown in reporting.</td>
</tr>
<tr class="even">
<td>referrer=</td>
<td>[All Referral Domain types, otherwise Optional] Can be used instead of search_engine= and search_keyword. Those values will be inferred by parsing the referrer URL. Referral Domains + search will use referrer as the Traffic Source if either the search_engine or search_keywords are omitted.</td>
</tr>
<tr class="odd">
<td>mobile_click_to_call=</td>
<td>[Optional] Option to return mobile enabled links that populate the smartphone’s dialer when clicked.</td>
</tr>
<tr class="even">
<td>&lt;NETWORK_AFFILIATE_ID_NAME&gt;</td>
<td>[Optional] This parameter name is determined by the network and is used to allocate a promo number on behalf of the publisher. For example, pid=2341</td>
</tr>
</tbody>
</table>
<p>Endpoint:</p>
<p><code>https://invoca.net/api/@@RINGPOOL_API_VERSION/ring_pools/16/allocate_number.xml?ring_pool_key=&lt;KEY&gt;&amp;param1=&lt;VALUE1&gt;&amp;param2=&lt;VALUE2&gt;</code></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->

        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </body>
</html>
