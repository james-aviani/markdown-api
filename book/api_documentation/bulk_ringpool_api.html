<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Bulk Ringpool API - Invoca Markdown API</title>


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../index.html"><strong aria-hidden="true">1.</strong> Intro</a></li><li class="chapter-item expanded "><a href="../basics/index.html"><strong aria-hidden="true">2.</strong> The Basics</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../basics/design_principles.html"><strong aria-hidden="true">2.1.</strong> Design Principles</a></li><li class="chapter-item expanded "><a href="../basics/error_handling.html"><strong aria-hidden="true">2.2.</strong> Error Handling</a></li><li class="chapter-item expanded "><a href="../basics/ppc_platform_authentication_access_tokens.html"><strong aria-hidden="true">2.3.</strong> PPC Platform Authentication</a></li><li class="chapter-item expanded "><a href="../basics/saml_single_sign_on.html"><strong aria-hidden="true">2.4.</strong> Single Sign On</a></li></ol></li><li class="chapter-item expanded "><a href="../api_documentation/index.html"><strong aria-hidden="true">3.</strong> API Documentation</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../api_documentation/transactions_api/index.html"><strong aria-hidden="true">3.1.</strong> Transactions API</a></li><li class="chapter-item expanded "><a href="../api_documentation/network_integration/index.html"><strong aria-hidden="true">3.2.</strong> Network Integrations API</a></li><li class="chapter-item expanded "><a href="../api_documentation/bulk_ringpool_api.html" class="active"><strong aria-hidden="true">3.3.</strong> Bulk Ringpool API</a></li><li class="chapter-item expanded "><a href="../api_documentation/signal_api/index.html"><strong aria-hidden="true">3.4.</strong> Signal API</a></li><li class="chapter-item expanded "><a href="../api_documentation/manage_api_credentials.html"><strong aria-hidden="true">3.5.</strong> Manage API Credentials</a></li></ol></li><li class="chapter-item expanded "><a href="../web_integration.html"><strong aria-hidden="true">4.</strong> Web Integration</a></li><li class="chapter-item expanded "><a href="../api_documentation/index.html"><strong aria-hidden="true">5.</strong> Depricated APIs</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../api_documentation/conversion_reporting.html"><strong aria-hidden="true">5.1.</strong> Conversion Reporting API</a></li><li class="chapter-item expanded "><a href="../api_documentation/ringpool_api.html"><strong aria-hidden="true">5.2.</strong> Ringpool API</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Invoca Markdown API</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="bulk-ringpool-api"><a class="header" href="#bulk-ringpool-api">Bulk Ringpool API</a></h1>
<p>Before using the Bulk RingPool API, contact <a href="mailto:questions@invoca.com">questions@invoca.com</a> to
enable the Bulk RingPool API feature. It is recommended that before you
enable the feature on your production platform, testing occurs on a demo
or test platform.</p>
<h2 id="overview"><a class="header" href="#overview">Overview</a></h2>
<p>The Bulk RingPool API is designed to efficiently handle a high volume of
requests per second. A persistent connection is strongly recommended.</p>
<p>The Bulk RingPool API can be enabled on the Network, Advertiser, or
Publisher level. Note that once enabled, all new or edited RingPools are
served by the Bulk RingPool API and not the RingPool API. Therefore, if
the Bulk RingPool API is enabled for your organization, attempting to
access a RingPool with the RingPool API results in an error.</p>
<p>Finally, also note that only the custom RingPool type is supported by
the Bulk RingPool API.</p>
<p><strong>Example API URL:</strong></p>
<p><code>POST https://pnapi.invoca.net/api/@@PNAPI_VERSION/bulk.json</code></p>
<h2 id="request-body"><a class="header" href="#request-body">Request Body</a></h2>
<p>The JSON POST body of the request has a top level key &quot;request&quot; which
maps to an array of hashes, where each hash contains a RingPool API URL.
The array must contain at least one entry. The requests follow a similar
format to the RingPool API, which can be found here.</p>
<p>Each hash in the array must contain a key/value pair with a key of
&quot;api_suffix&quot;. The value must be the suffix of the RingPool API URL
after /api/&lt;date&gt;.</p>
<p>At least one RingPool parameter must be present in each allocation
request, even if the value is an empty string.</p>
<p>Each element may also include a key/value pair with a key of
&quot;request_id&quot;. If provided, it is echoed in the response for context.
This parameter is optional and does not have to be unique across the
hashes.</p>
<p>Individual responses and request IDs are returned in the same order as
the requests.</p>
<p>Below is an example of the JSON request body:</p>
<pre><code class="language-{.sourceCode .json}">{
 &quot;requests&quot;:[
  {&quot;api_suffix&quot;:&quot;&lt;RING_POOL_ID&gt;/allocate_number.json?ring_pool_key=&lt;RING_POOL_KEY&gt;&amp;m1=autos&amp;m2=ford&quot;,&quot;request_id&quot;:&quot;193C5F&quot;},
  {&quot;api_suffix&quot;:&quot;&lt;RING_POOL_ID&gt;/allocate_number.json?ring_pool_key=&lt;RING_POOL_KEY&gt;&amp;m1=antiques&quot;,&quot;request_id&quot;:&quot;58CD4F&quot;},
  {&quot;api_suffix&quot;:&quot;&lt;RING_POOL_ID&gt;/allocate_number.json?ring_pool_key=&lt;RING_POOL_KEY&gt;&amp;m1=electronics&quot;,&quot;request_id&quot;:&quot;E3901B&quot;}
 ]
}
</code></pre>
<h2 id="response-body"><a class="header" href="#response-body">Response Body</a></h2>
<p>The response format is in <strong>JSON</strong>.</p>
<p>Below is an example response (whitespace added for clarity):</p>
<pre><code class="language-{.sourceCode .json}">{
 &quot;responses&quot;:[
  {&quot;request_id&quot;:&quot;193C5F&quot;,&quot;promo_number_formatted&quot;:&quot;888-390-6665&quot;,&quot;promo_number&quot;:&quot;8883906665&quot;,&quot;tracking_url&quot;:&quot;http://ringrevenue.com/c/1/14-11-109?us=http%3A%2F%2Fwww2.ringrevenue.com.com%2Fdemo%2F8x8_staging.html%3Fsid%3D8883906665%26PPCPN%3D8883906665&quot;},
  {&quot;request_id&quot;:&quot;58CD4F&quot;,&quot;promo_number_formatted&quot;:&quot;877-455-1120&quot;,&quot;promo_number&quot;:&quot;8774551120&quot;,&quot;tracking_url&quot;:&quot;http://ringringrevenue.com/c/1/19-99-210?us=http%3A%2F%2Fwww2.ringrevenue.com%2Fdemo%2F8x8_staging.html%3Fsid%3D8774551120%26PPCPN%3D8774551120&quot;},
  {&quot;request_id&quot;:&quot;E3901B&quot;,&quot;promo_number_formatted&quot;:&quot;866-971-5703&quot;,&quot;promo_number&quot;:&quot;8669715703&quot;,&quot;tracking_url&quot;:&quot;http://ringringrevenue.com/c/1/38-240-19?us=http%3A%2F%2Fwww2.ringrevenue.com%2Fdemo%2F8x8_staging.html%3Fsid%3D8669715703%26PPCPN%3D8669715703&quot;,&quot;overflow&quot;:true}
 ]
}
</code></pre>
<p>Note the last response above has [&quot;overflow&quot;:true]{.title-ref}. This
indicates that the number returned is the overflow number for that
RingPool. To simplify the normal case when the number is not overflow,
the key-value pair is omitted when the value would be
[false]{.title-ref}.</p>
<p>Additionally, Bulk API responses return the total server processing
(this does not include transit) time for the request in the header under
the key &quot;processing-time&quot;, and is reported in milliseconds.</p>
<h2 id="errors"><a class="header" href="#errors">Errors</a></h2>
<p>The Bulk RingPool API clearly identifies errors when a request can not
be processed. For example, when the parameters are incorrect, an error
response will be returned for that row in the response as shown below:</p>
<pre><code class="language-{.sourceCode .json}">{
   &quot;responses&quot;:[
    {&quot;request_id&quot;:&quot;193C5F&quot;,&quot;promo_number_formatted&quot;:&quot;888-390-6665&quot;,&quot;promo_number&quot;:&quot;8883906665&quot;,&quot;tracking_url&quot;:&quot;http://ringrevenue.com/c/1/14-11-109?us=http%3A%2F%2Fwww2.ringrevenue.com.com%2Fdemo%2F8x8_staging.html%3Fsid%3D8883906665%26PPCPN%3D8883906665&quot;},
    {&quot;request_id&quot;:&quot;58CD4F&quot;,&quot;error_class&quot;:&quot;InvalidKey&quot;,&quot;message&quot;:&quot;API Key 'A329F4DC002168' is not valid for resource '1'&quot;},
    {&quot;request_id&quot;:&quot;E3901B&quot;,&quot;promo_number_formatted&quot;:&quot;866-971-5703&quot;,&quot;promo_number&quot;:&quot;8669715703&quot;,&quot;tracking_url&quot;:&quot;http://ringringrevenue.com/c/1/38-240-19?us=http%3A%2F%2Fwww2.ringrevenue.com%2Fdemo%2F8x8_staging.html%3Fsid%3D8669715703%26PPCPN%3D8669715703&quot;}
  ]
}
</code></pre>
<p>As another example, the following exception occurs when attempting to
allocate a number with the RingPool API against a RingPool that has been
set up to use the Bulk RingPool API:</p>
<pre><code class="language-{.sourceCode .json}">{
    &quot;errors&quot;:
    {
        &quot;invalid_data&quot;:&quot;Numbers are automatically allocated by the PNAPI server&quot;,
        &quot;class”:”OnlyBulkNumberAllocationAllowed&quot;
    }
}
</code></pre>
<p>If a system error occurs, an InternalServiceError will be returned with
an integer error handle.</p>
<p>Contact <a href="mailto:questions@invoca.com">questions@invoca.com</a> to determine the root cause of such an
error.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../api_documentation/network_integration/index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../api_documentation/signal_api/index.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../api_documentation/network_integration/index.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../api_documentation/signal_api/index.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script type="text/javascript">
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
